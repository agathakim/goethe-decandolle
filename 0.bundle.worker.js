!function(t){var e={};function r(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=23)}([function(t,e,r){var n=r(9),a=r(10),i="undefined"!=typeof Float64Array;function o(t,e){return t[0]-e[0]}function s(){var t,e=this.stride,r=new Array(e.length);for(t=0;t<r.length;++t)r[t]=[Math.abs(e[t]),t];r.sort(o);var n=new Array(r.length);for(t=0;t<n.length;++t)n[t]=r[t][1];return n}function u(t,e){var r=["View",e,"d",t].join("");e<0&&(r="View_Nil"+t);var a="generic"===t;if(-1===e){var i="function "+r+"(a){this.data=a;};var proto="+r+".prototype;proto.dtype='"+t+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+r+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+r+"(a){return new "+r+"(a);}";return new Function(i)()}if(0===e){i="function "+r+"(a,d) {this.data = a;this.offset = d};var proto="+r+".prototype;proto.dtype='"+t+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+r+"_copy() {return new "+r+"(this.data,this.offset)};proto.pick=function "+r+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+r+"_get(){return "+(a?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+r+"_set(v){return "+(a?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+r+"(a,b,c,d){return new "+r+"(a,d)}";return new Function("TrivialArray",i)(l[t][0])}i=["'use strict'"];var o=n(e),u=o.map(function(t){return"i"+t}),c="this.offset+"+o.map(function(t){return"this.stride["+t+"]*i"+t}).join("+"),h=o.map(function(t){return"b"+t}).join(","),f=o.map(function(t){return"c"+t}).join(",");i.push("function "+r+"(a,"+h+","+f+",d){this.data=a","this.shape=["+h+"]","this.stride=["+f+"]","this.offset=d|0}","var proto="+r+".prototype","proto.dtype='"+t+"'","proto.dimension="+e),i.push("Object.defineProperty(proto,'size',{get:function "+r+"_size(){return "+o.map(function(t){return"this.shape["+t+"]"}).join("*"),"}})"),1===e?i.push("proto.order=[0]"):(i.push("Object.defineProperty(proto,'order',{get:"),e<4?(i.push("function "+r+"_order(){"),2===e?i.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===e&&i.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):i.push("ORDER})")),i.push("proto.set=function "+r+"_set("+u.join(",")+",v){"),a?i.push("return this.data.set("+c+",v)}"):i.push("return this.data["+c+"]=v}"),i.push("proto.get=function "+r+"_get("+u.join(",")+"){"),a?i.push("return this.data.get("+c+")}"):i.push("return this.data["+c+"]}"),i.push("proto.index=function "+r+"_index(",u.join(),"){return "+c+"}"),i.push("proto.hi=function "+r+"_hi("+u.join(",")+"){return new "+r+"(this.data,"+o.map(function(t){return["(typeof i",t,"!=='number'||i",t,"<0)?this.shape[",t,"]:i",t,"|0"].join("")}).join(",")+","+o.map(function(t){return"this.stride["+t+"]"}).join(",")+",this.offset)}");var p=o.map(function(t){return"a"+t+"=this.shape["+t+"]"}),d=o.map(function(t){return"c"+t+"=this.stride["+t+"]"});i.push("proto.lo=function "+r+"_lo("+u.join(",")+"){var b=this.offset,d=0,"+p.join(",")+","+d.join(","));for(var g=0;g<e;++g)i.push("if(typeof i"+g+"==='number'&&i"+g+">=0){d=i"+g+"|0;b+=c"+g+"*d;a"+g+"-=d}");i.push("return new "+r+"(this.data,"+o.map(function(t){return"a"+t}).join(",")+","+o.map(function(t){return"c"+t}).join(",")+",b)}"),i.push("proto.step=function "+r+"_step("+u.join(",")+"){var "+o.map(function(t){return"a"+t+"=this.shape["+t+"]"}).join(",")+","+o.map(function(t){return"b"+t+"=this.stride["+t+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(g=0;g<e;++g)i.push("if(typeof i"+g+"==='number'){d=i"+g+"|0;if(d<0){c+=b"+g+"*(a"+g+"-1);a"+g+"=ceil(-a"+g+"/d)}else{a"+g+"=ceil(a"+g+"/d)}b"+g+"*=d}");i.push("return new "+r+"(this.data,"+o.map(function(t){return"a"+t}).join(",")+","+o.map(function(t){return"b"+t}).join(",")+",c)}");var y=new Array(e),m=new Array(e);for(g=0;g<e;++g)y[g]="a[i"+g+"]",m[g]="b[i"+g+"]";i.push("proto.transpose=function "+r+"_transpose("+u+"){"+u.map(function(t,e){return t+"=("+t+"===undefined?"+e+":"+t+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+r+"(this.data,"+y.join(",")+","+m.join(",")+",this.offset)}"),i.push("proto.pick=function "+r+"_pick("+u+"){var a=[],b=[],c=this.offset");for(g=0;g<e;++g)i.push("if(typeof i"+g+"==='number'&&i"+g+">=0){c=(c+this.stride["+g+"]*i"+g+")|0}else{a.push(this.shape["+g+"]);b.push(this.stride["+g+"])}");return i.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),i.push("return function construct_"+r+"(data,shape,stride,offset){return new "+r+"(data,"+o.map(function(t){return"shape["+t+"]"}).join(",")+","+o.map(function(t){return"stride["+t+"]"}).join(",")+",offset)}"),new Function("CTOR_LIST","ORDER",i.join("\n"))(l[t],s)}var l={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};t.exports=function(t,e,r,n){if(void 0===t)return(0,l.array[0])([]);"number"==typeof t&&(t=[t]),void 0===e&&(e=[t.length]);var o=e.length;if(void 0===r){r=new Array(o);for(var s=o-1,c=1;s>=0;--s)r[s]=c,c*=e[s]}if(void 0===n)for(n=0,s=0;s<o;++s)r[s]<0&&(n-=(e[s]-1)*r[s]);for(var h=function(t){if(a(t))return"buffer";if(i)switch(Object.prototype.toString.call(t)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(t)?"array":"generic"}(t),f=l[h];f.length<=o+1;)f.push(u(h,f.length-1));return(0,f[o+1])(t,e,r,n)}},function(t,e,r){"use strict";var n=r(17),a=r(3),i=["args","body"],o=["pre","post","printCode","funcName","blockSize"];t.exports=function(t){for(var e in t)i.indexOf(e)<0&&o.indexOf(e)<0&&console.warn("cwise: Unknown argument '"+e+"' passed to expression compiler");for(var r=0;r<i.length;++r)if(!t[i[r]])throw new Error("cwise: Missing argument: "+i[r]);return a({args:t.args,pre:n(t.pre||function(){}),body:n(t.body),post:n(t.post||function(){}),debug:!!t.printCode,funcName:t.funcName||t.body.name||"cwise",blockSize:t.blockSize||64})}},function(t,e,r){"use strict";var n=r(3),a={body:"",args:[],thisVars:[],localVars:[]};function i(t){if(!t)return a;for(var e=0;e<t.args.length;++e){var r=t.args[e];t.args[e]=0===e?{name:r,lvalue:!0,rvalue:!!t.rvalue,count:t.count||1}:{name:r,lvalue:!1,rvalue:!0,count:1}}return t.thisVars||(t.thisVars=[]),t.localVars||(t.localVars=[]),t}function o(t){for(var e=[],r=0;r<t.args.length;++r)e.push("a"+r);return new Function("P",["return function ",t.funcName,"_ndarrayops(",e.join(","),") {P(",e.join(","),");return a0}"].join(""))(function(t){return n({args:t.args,pre:i(t.pre),body:i(t.body),post:i(t.proc),funcName:t.funcName})}(t))}var s={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var t in s){var r=s[t];e[t]=o({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+r+"c"},funcName:t}),e[t+"eq"]=o({args:["array","array"],body:{args:["a","b"],body:"a"+r+"=b"},rvalue:!0,funcName:t+"eq"}),e[t+"s"]=o({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+r+"s"},funcName:t+"s"}),e[t+"seq"]=o({args:["array","scalar"],body:{args:["a","s"],body:"a"+r+"=s"},rvalue:!0,funcName:t+"seq"})}}();var u={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var t in u){var r=u[t];e[t]=o({args:["array","array"],body:{args:["a","b"],body:"a="+r+"b"},funcName:t}),e[t+"eq"]=o({args:["array"],body:{args:["a"],body:"a="+r+"a"},rvalue:!0,count:2,funcName:t+"eq"})}}();var l={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var t in l){var r=l[t];e[t]=o({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+r+"c"},funcName:t}),e[t+"s"]=o({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+r+"s"},funcName:t+"s"}),e[t+"eq"]=o({args:["array","array"],body:{args:["a","b"],body:"a=a"+r+"b"},rvalue:!0,count:2,funcName:t+"eq"}),e[t+"seq"]=o({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+r+"s"},rvalue:!0,count:2,funcName:t+"seq"})}}();var c=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var t=0;t<c.length;++t){var r=c[t];e[r]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:r}),e[r+"eq"]=o({args:["array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"eq"})}}();var h=["max","min","atan2","pow"];!function(){for(var t=0;t<h.length;++t){var r=h[t];e[r]=o({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:r}),e[r+"s"]=o({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:r+"s"}),e[r+"eq"]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"eq"}),e[r+"seq"]=o({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"seq"})}}();var f=["atan2","pow"];!function(){for(var t=0;t<f.length;++t){var r=f[t];e[r+"op"]=o({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:r+"op"}),e[r+"ops"]=o({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:r+"ops"}),e[r+"opeq"]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"opeq"}),e[r+"opseq"]=o({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"opseq"})}}(),e.any=n({args:["array"],pre:a,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),e.all=n({args:["array"],pre:a,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),e.sum=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),e.prod=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),e.norm2squared=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),e.norm2=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),e.norminf=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),e.norm1=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),e.sup=n({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),e.inf=n({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),e.argmin=n({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),e.argmax=n({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),e.random=o({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),e.assign=o({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),e.assigns=o({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),e.equals=n({args:["array","array"],pre:a,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},function(t,e,r){"use strict";var n=r(11);t.exports=function(t){var e=new function(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1};e.pre=t.pre,e.body=t.body,e.post=t.post;var r=t.args.slice(0);e.argTypes=r;for(var a=0;a<r.length;++a){var i=r[a];if("array"===i||"object"==typeof i&&i.blockIndices){if(e.argTypes[a]="array",e.arrayArgs.push(a),e.arrayBlockIndices.push(i.blockIndices?i.blockIndices:0),e.shimArgs.push("array"+a),a<e.pre.args.length&&e.pre.args[a].count>0)throw new Error("cwise: pre() block may not reference array args");if(a<e.post.args.length&&e.post.args[a].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===i)e.scalarArgs.push(a),e.shimArgs.push("scalar"+a);else if("index"===i){if(e.indexArgs.push(a),a<e.pre.args.length&&e.pre.args[a].count>0)throw new Error("cwise: pre() block may not reference array index");if(a<e.body.args.length&&e.body.args[a].lvalue)throw new Error("cwise: body() block may not write to array index");if(a<e.post.args.length&&e.post.args[a].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===i){if(e.shapeArgs.push(a),a<e.pre.args.length&&e.pre.args[a].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(a<e.body.args.length&&e.body.args[a].lvalue)throw new Error("cwise: body() block may not write to array shape");if(a<e.post.args.length&&e.post.args[a].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof i||!i.offset)throw new Error("cwise: Unknown argument type "+r[a]);e.argTypes[a]="offset",e.offsetArgs.push({array:i.array,offset:i.offset}),e.offsetArgIndex.push(a)}}if(e.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(e.pre.args.length>r.length)throw new Error("cwise: Too many arguments in pre() block");if(e.body.args.length>r.length)throw new Error("cwise: Too many arguments in body() block");if(e.post.args.length>r.length)throw new Error("cwise: Too many arguments in post() block");return e.debug=!!t.printCode||!!t.debug,e.funcName=t.funcName||"cwise",e.blockSize=t.blockSize||64,n(e)}},,function(t,e,r){"use strict";t.exports=function(t,e,r){return 0===t.length?t:e?(r||t.sort(e),function(t,e){for(var r=1,n=t.length,a=t[0],i=t[0],o=1;o<n;++o)if(i=a,e(a=t[o],i)){if(o===r){r++;continue}t[r++]=a}return t.length=r,t}(t,e)):(r||t.sort(),function(t){for(var e=1,r=t.length,n=t[0],a=t[0],i=1;i<r;++i,a=n)if(a=n,(n=t[i])!==a){if(i===e){e++;continue}t[e++]=n}return t.length=e,t}(t))}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var r=t.shape[0],a=(0,n.default)(new Float64Array(r*r),[r,r]);switch(e){case"euclidean":for(var i=0;i<r;i++)for(var c=i+1;c<r;c++){var h=o(t.pick(i,null),t.pick(c,null));a.set(i,c,h),a.set(c,i,h)}break;case"manhattan":for(i=0;i<r;i++)for(c=i+1;c<r;c++){h=s(t.pick(i,null),t.pick(c,null));a.set(i,c,h),a.set(c,i,h)}break;case"jaccard":for(i=0;i<r;i++)for(c=i+1;c<r;c++){h=u(t.pick(i,null),t.pick(c,null));a.set(i,c,h),a.set(c,i,h)}break;case"dice":for(i=0;i<r;i++)for(c=i+1;c<r;c++){h=l(t.pick(i,null),t.pick(c,null));a.set(i,c,h),a.set(c,i,h)}}return a};var n=i(r(0)),a=i(r(1));function i(t){return t&&t.__esModule?t:{default:t}}var o=(0,a.default)({args:["array","array"],pre:function(t,e){this.sum=0},body:function(t,e){var r=t-e;this.sum+=r*r},post:function(t,e){return Math.sqrt(this.sum)}}),s=(0,a.default)({args:["array","array"],pre:function(t,e){this.sum=0},body:function(t,e){this.sum+=Math.abs(t-e)},post:function(t,e){return this.sum}}),u=(0,a.default)({args:["array","array"],pre:function(t,e){this.tf=0,this.tt=0},body:function(t,e){var r=Math.round(t),n=Math.round(e);this.tf+=+(r!=n),this.tt+=+(1==r&&1==n)},post:function(t,e){return this.tf+this.tt===0?1:this.tf/(this.tf+this.tt)}}),l=(0,a.default)({args:["array","array"],pre:function(t,e){this.tf=0,this.tt=0},body:function(t,e){var r=Math.round(t),n=Math.round(e);this.tf+=+(r!=n),this.tt+=+(1==r&&1==n)},post:function(t,e){return this.tf+this.tt===0?1:this.tf/(this.tf+2*this.tt)}});t.exports=e.default},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,a=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!e||r.length!==e);n=!0);}catch(t){a=!0,i=t}finally{try{!n&&s.return&&s.return()}finally{if(a)throw i}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=r(8),o=g(r(0)),s=g(r(2)),u=g(r(13)),l=g(r(15)),c=g(r(1)),h=g(r(20)),f=g(r(6)),p=g(r(21)),d=g(r(22));function g(t){return t&&t.__esModule?t:{default:t}}function y(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}var m=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,Object.getPrototypeOf(e).call(this));return t=t||{},r.dim=t.dim||2,r.perplexity=t.perplexity||30,r.earlyExaggeration=t.earlyExaggeration||4,r.learningRate=t.learningRate||1e3,r.nIter=t.nIter||1e3,r.metric=t.metric||"euclidean",r.barneshut=t.barneshut||!1,r.inputData=null,r.outputEmbedding=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.EventEmitter),a(e,[{key:"init",value:function(t){var e=(t=t||{}).data||[],r=t.type||"dense";if("dense"===r)this.inputData=(0,u.default)(e);else{if("sparse"!==r)throw new Error("input data type must be dense or sparse");for(var n=[],a=1,i=function(t){var r=Math.max.apply(null,e.map(function(e){return e[t]}))+1;n.push(r),a*=r},s=0;s<e[0].length;s++)i(s);this.inputData=(0,o.default)(new Float64Array(a),n);var l=!0,c=!1,f=void 0;try{for(var p,d=e[Symbol.iterator]();!(l=(p=d.next()).done);l=!0){var g,m=p.value;(g=this.inputData).set.apply(g,y(m).concat([1]))}}catch(t){c=!0,f=t}finally{try{!l&&d.return&&d.return()}finally{if(c)throw f}}}this.outputEmbedding=(0,h.default)(this.inputData.shape[0],this.dim)}},{key:"run",value:function(){this.emit("progressStatus","Calculating pairwise distances"),this.distances=(0,f.default)(this.inputData,this.metric),this.emit("progressStatus","Calculating joint probabilities"),this.alpha=Math.max(this.dim-1,1),this.P=(0,p.default)(this.distances,this.perplexity);var t=Number.MAX_VALUE,e=0;this.emit("progressStatus","Early exaggeration with momentum 0.5"),s.default.mulseq(this.P,this.earlyExaggeration);var r=this._gradDesc(e,50,.5,0,0),a=n(r,2);a[0],e=a[1],this.emit("progressStatus","Early exaggeration with momentum 0.8");var i=this._gradDesc(e+1,100,.8,0,0),o=n(i,2);o[0],e=o[1],this.emit("progressStatus","Final optimization with momentum 0.8"),s.default.divseq(this.P,this.earlyExaggeration);var u=this._gradDesc(e+1,this.nIter,.8,1e-6,1e-6),l=n(u,2);return t=l[0],e=l[1],this.emit("progressStatus","Optimization end"),[t,e]}},{key:"rerun",value:function(){this.outputEmbedding=(0,h.default)(this.inputData.shape[0],this.dim);var t=this.run(),e=n(t,2);return[e[0],e[1]]}},{key:"getOutput",value:function(){return(0,l.default)(this.outputEmbedding)}},{key:"getOutputScaled",value:function(){for(var t=(0,o.default)(new Float64Array(this.outputEmbedding.size),this.outputEmbedding.shape),e=(0,o.default)(new Float64Array(this.outputEmbedding.shape[0]),[this.outputEmbedding.shape[0]]),r=0;r<this.outputEmbedding.shape[1];r++){var n=s.default.sup(s.default.abs(e,this.outputEmbedding.pick(null,r)));s.default.divs(t.pick(null,r),this.outputEmbedding.pick(null,r),n)}return(0,l.default)(t)}},{key:"_gradDesc",value:function(t,e,r){for(var a=arguments.length<=3||void 0===arguments[3]?1e-6:arguments[3],i=arguments.length<=4||void 0===arguments[4]?1e-6:arguments[4],u=(0,o.default)(new Float64Array(this.outputEmbedding.size),this.outputEmbedding.shape),l=new Float64Array(this.outputEmbedding.size),h=0;h<l.length;h++)l[h]=1;var f=(0,o.default)(l,this.outputEmbedding.shape),p=Number.MAX_VALUE,g=Number.MAX_VALUE,y=0,m=(0,c.default)({args:["array"],pre:function(t){this.sum=0},body:function(t){this.sum+=t*t},post:function(t){return Math.sqrt(this.sum)}}),v=(0,c.default)({args:["array","array","array"],body:function(t,e,r){e*r>=0?t+=.05:t*=.95,t=Math.max(t,.01)}}),b=void 0;for(b=t;b<e;b++){var _=(0,d.default)(this.outputEmbedding,this.P,this.alpha),w=n(_,2),x=w[0],k=w[1],S=Math.abs(x-p);p=x;var E=m(k);if(this.emit("progressIter",[b,p,E]),p<g)g=p,y=b;else if(b-y>30)break;if(a>=E)break;if(i>=S)break;v(f,u,k),s.default.muleq(k,f);var A=(0,o.default)(new Float64Array(k.size),k.shape);s.default.muls(A,k,this.learningRate),s.default.mulseq(u,r),s.default.subeq(u,A),s.default.addeq(this.outputEmbedding,u),this.emit("progressData",this.getOutputScaled())}return[p,b]}}]),e}();e.default=m,t.exports=e.default},function(t,e){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(t){return"function"==typeof t}function a(t){return"object"==typeof t&&null!==t}function i(t){return void 0===t}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if(!function(t){return"number"==typeof t}(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,r,o,s,u,l;if(this._events||(this._events={}),"error"===t&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var c=new Error('Uncaught, unspecified "error" event. ('+e+")");throw c.context=e,c}if(i(r=this._events[t]))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),r.apply(this,s)}else if(a(r))for(s=Array.prototype.slice.call(arguments,1),o=(l=r.slice()).length,u=0;u<o;u++)l[u].apply(this,s);return!0},r.prototype.addListener=function(t,e){var o;if(!n(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,n(e.listener)?e.listener:e),this._events[t]?a(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,a(this._events[t])&&!this._events[t].warned&&(o=i(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&o>0&&this._events[t].length>o&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){if(!n(e))throw TypeError("listener must be a function");var r=!1;function a(){this.removeListener(t,a),r||(r=!0,e.apply(this,arguments))}return a.listener=e,this.on(t,a),this},r.prototype.removeListener=function(t,e){var r,i,o,s;if(!n(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(o=(r=this._events[t]).length,i=-1,r===e||n(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(a(r)){for(s=o;s-- >0;)if(r[s]===e||r[s].listener&&r[s].listener===e){i=s;break}if(i<0)return this;1===r.length?(r.length=0,delete this._events[t]):r.splice(i,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n(r=this._events[t]))this.removeListener(t,r);else if(r)for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){return this._events&&this._events[t]?n(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(n(e))return 1;if(e)return e.length}return 0},r.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,r){"use strict";t.exports=function(t){for(var e=new Array(t),r=0;r<t;++r)e[r]=r;return e}},function(t,e){function r(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
t.exports=function(t){return null!=t&&(r(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&r(t.slice(0,0))}(t)||!!t._isBuffer)}},function(t,e,r){"use strict";var n=r(12);t.exports=function(t){var e=["'use strict'","var CACHED={}"],r=[],a=t.funcName+"_cwise_thunk";e.push(["return function ",a,"(",t.shimArgs.join(","),"){"].join(""));for(var i=[],o=[],s=[["array",t.arrayArgs[0],".shape.slice(",Math.max(0,t.arrayBlockIndices[0]),t.arrayBlockIndices[0]<0?","+t.arrayBlockIndices[0]+")":")"].join("")],u=[],l=[],c=0;c<t.arrayArgs.length;++c){var h=t.arrayArgs[c];r.push(["t",h,"=array",h,".dtype,","r",h,"=array",h,".order"].join("")),i.push("t"+h),i.push("r"+h),o.push("t"+h),o.push("r"+h+".join()"),s.push("array"+h+".data"),s.push("array"+h+".stride"),s.push("array"+h+".offset|0"),c>0&&(u.push("array"+t.arrayArgs[0]+".shape.length===array"+h+".shape.length+"+(Math.abs(t.arrayBlockIndices[0])-Math.abs(t.arrayBlockIndices[c]))),l.push("array"+t.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[0])+"]===array"+h+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[c])+"]"))}for(t.arrayArgs.length>1&&(e.push("if (!("+u.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),e.push("for(var shapeIndex=array"+t.arrayArgs[0]+".shape.length-"+Math.abs(t.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),e.push("if (!("+l.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),e.push("}")),c=0;c<t.scalarArgs.length;++c)s.push("scalar"+t.scalarArgs[c]);return r.push(["type=[",o.join(","),"].join()"].join("")),r.push("proc=CACHED[type]"),e.push("var "+r.join(",")),e.push(["if(!proc){","CACHED[type]=proc=compile([",i.join(","),"])}","return proc(",s.join(","),")}"].join("")),t.debug&&console.log("-----Generated thunk:\n"+e.join("\n")+"\n----------"),new Function("compile",e.join("\n"))(n.bind(void 0,t))}},function(t,e,r){"use strict";var n=r(5);function a(t,e,r){var n,a,i=t.length,o=e.arrayArgs.length,s=e.indexArgs.length>0,u=[],l=[],c=0,h=0;for(n=0;n<i;++n)l.push(["i",n,"=0"].join(""));for(a=0;a<o;++a)for(n=0;n<i;++n)h=c,c=t[n],0===n?l.push(["d",a,"s",n,"=t",a,"p",c].join("")):l.push(["d",a,"s",n,"=(t",a,"p",c,"-s",h,"*t",a,"p",h,")"].join(""));for(l.length>0&&u.push("var "+l.join(",")),n=i-1;n>=0;--n)c=t[n],u.push(["for(i",n,"=0;i",n,"<s",c,";++i",n,"){"].join(""));for(u.push(r),n=0;n<i;++n){for(h=c,c=t[n],a=0;a<o;++a)u.push(["p",a,"+=d",a,"s",n].join(""));s&&(n>0&&u.push(["index[",h,"]-=s",h].join("")),u.push(["++index[",c,"]"].join(""))),u.push("}")}return u.join("\n")}function i(t,e,r){for(var n=t.body,a=[],i=[],o=0;o<t.args.length;++o){var s=t.args[o];if(!(s.count<=0)){var u=new RegExp(s.name,"g"),l="",c=e.arrayArgs.indexOf(o);switch(e.argTypes[o]){case"offset":var h=e.offsetArgIndex.indexOf(o);c=e.offsetArgs[h].array,l="+q"+h;case"array":l="p"+c+l;var f="l"+o,p="a"+c;if(0===e.arrayBlockIndices[c])1===s.count?"generic"===r[c]?s.lvalue?(a.push(["var ",f,"=",p,".get(",l,")"].join("")),n=n.replace(u,f),i.push([p,".set(",l,",",f,")"].join(""))):n=n.replace(u,[p,".get(",l,")"].join("")):n=n.replace(u,[p,"[",l,"]"].join("")):"generic"===r[c]?(a.push(["var ",f,"=",p,".get(",l,")"].join("")),n=n.replace(u,f),s.lvalue&&i.push([p,".set(",l,",",f,")"].join(""))):(a.push(["var ",f,"=",p,"[",l,"]"].join("")),n=n.replace(u,f),s.lvalue&&i.push([p,"[",l,"]=",f].join("")));else{for(var d=[s.name],g=[l],y=0;y<Math.abs(e.arrayBlockIndices[c]);y++)d.push("\\s*\\[([^\\]]+)\\]"),g.push("$"+(y+1)+"*t"+c+"b"+y);if(u=new RegExp(d.join(""),"g"),l=g.join("+"),"generic"===r[c])throw new Error("cwise: Generic arrays not supported in combination with blocks!");n=n.replace(u,[p,"[",l,"]"].join(""))}break;case"scalar":n=n.replace(u,"Y"+e.scalarArgs.indexOf(o));break;case"index":n=n.replace(u,"index");break;case"shape":n=n.replace(u,"shape")}}}return[a.join("\n"),n,i.join("\n")].join("\n").trim()}t.exports=function(t,e){for(var r=e[1].length-Math.abs(t.arrayBlockIndices[0])|0,o=new Array(t.arrayArgs.length),s=new Array(t.arrayArgs.length),u=0;u<t.arrayArgs.length;++u)s[u]=e[2*u],o[u]=e[2*u+1];var l=[],c=[],h=[],f=[],p=[];for(u=0;u<t.arrayArgs.length;++u){t.arrayBlockIndices[u]<0?(h.push(0),f.push(r),l.push(r),c.push(r+t.arrayBlockIndices[u])):(h.push(t.arrayBlockIndices[u]),f.push(t.arrayBlockIndices[u]+r),l.push(0),c.push(t.arrayBlockIndices[u]));for(var d=[],g=0;g<o[u].length;g++)h[u]<=o[u][g]&&o[u][g]<f[u]&&d.push(o[u][g]-h[u]);p.push(d)}var y=["SS"],m=["'use strict'"],v=[];for(g=0;g<r;++g)v.push(["s",g,"=SS[",g,"]"].join(""));for(u=0;u<t.arrayArgs.length;++u){for(y.push("a"+u),y.push("t"+u),y.push("p"+u),g=0;g<r;++g)v.push(["t",u,"p",g,"=t",u,"[",h[u]+g,"]"].join(""));for(g=0;g<Math.abs(t.arrayBlockIndices[u]);++g)v.push(["t",u,"b",g,"=t",u,"[",l[u]+g,"]"].join(""))}for(u=0;u<t.scalarArgs.length;++u)y.push("Y"+u);if(t.shapeArgs.length>0&&v.push("shape=SS.slice(0)"),t.indexArgs.length>0){var b=new Array(r);for(u=0;u<r;++u)b[u]="0";v.push(["index=[",b.join(","),"]"].join(""))}for(u=0;u<t.offsetArgs.length;++u){var _=t.offsetArgs[u],w=[];for(g=0;g<_.offset.length;++g)0!==_.offset[g]&&(1===_.offset[g]?w.push(["t",_.array,"p",g].join("")):w.push([_.offset[g],"*t",_.array,"p",g].join("")));0===w.length?v.push("q"+u+"=0"):v.push(["q",u,"=",w.join("+")].join(""))}var x=n([].concat(t.pre.thisVars).concat(t.body.thisVars).concat(t.post.thisVars));for((v=v.concat(x)).length>0&&m.push("var "+v.join(",")),u=0;u<t.arrayArgs.length;++u)m.push("p"+u+"|=0");t.pre.body.length>3&&m.push(i(t.pre,t,s));var k=i(t.body,t,s),S=function(t){for(var e=0,r=t[0].length;e<r;){for(var n=1;n<t.length;++n)if(t[n][e]!==t[0][e])return e;++e}return e}(p);S<r?m.push(function(t,e,r,n){for(var i=e.length,o=r.arrayArgs.length,s=r.blockSize,u=r.indexArgs.length>0,l=[],c=0;c<o;++c)l.push(["var offset",c,"=p",c].join(""));for(c=t;c<i;++c)l.push(["for(var j"+c+"=SS[",e[c],"]|0;j",c,">0;){"].join("")),l.push(["if(j",c,"<",s,"){"].join("")),l.push(["s",e[c],"=j",c].join("")),l.push(["j",c,"=0"].join("")),l.push(["}else{s",e[c],"=",s].join("")),l.push(["j",c,"-=",s,"}"].join("")),u&&l.push(["index[",e[c],"]=j",c].join(""));for(c=0;c<o;++c){for(var h=["offset"+c],f=t;f<i;++f)h.push(["j",f,"*t",c,"p",e[f]].join(""));l.push(["p",c,"=(",h.join("+"),")"].join(""))}for(l.push(a(e,r,n)),c=t;c<i;++c)l.push("}");return l.join("\n")}(S,p[0],t,k)):m.push(a(p[0],t,k)),t.post.body.length>3&&m.push(i(t.post,t,s)),t.debug&&console.log("-----Generated cwise routine for ",e,":\n"+m.join("\n")+"\n----------");var E=[t.funcName||"unnamed","_cwise_loop_",o[0].join("s"),"m",S,function(t){for(var e=new Array(t.length),r=!0,n=0;n<t.length;++n){var a=t[n],i=a.match(/\d+/);i=i?i[0]:"",0===a.charAt(0)?e[n]="u"+a.charAt(1)+i:e[n]=a.charAt(0)+i,n>0&&(r=r&&e[n]===e[n-1])}return r?e[0]:e.join("")}(s)].join("");return new Function(["function ",E,"(",y.join(","),"){",m.join("\n"),"} return ",E].join(""))()}},function(t,e,r){"use strict";var n=r(0),a=r(14);t.exports=function(t,e){for(var r=[],i=t,o=1;Array.isArray(i);)r.push(i.length),o*=i.length,i=i[0];return 0===r.length?n():(e||(e=n(new Float64Array(o),r)),a(e,t),e)}},function(t,e,r){t.exports=r(3)({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\nvar _inline_1_v=_inline_1_arg1_,_inline_1_i\nfor(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {\n_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]\n}\n_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]\n}",args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64})},function(t,e,r){"use strict";var n=r(16),a=r(1)({args:["array","scalar","index"],body:function(t,e,r){var n,a=e;for(n=0;n<r.length-1;++n)a=a[r[n]];a[r[r.length-1]]=t}});t.exports=function(t){var e=n(t.shape);return a(t,e),e}},function(t,e,r){"use strict";t.exports=function(t,e){switch(void 0===e&&(e=0),typeof t){case"number":if(t>0)return function(t,e){var r,n;for(r=new Array(t),n=0;n<t;++n)r[n]=e;return r}(0|t,e);break;case"object":if("number"==typeof t.length)return function t(e,r,n){var a=0|e[n];if(a<=0)return[];var i,o=new Array(a);if(n===e.length-1)for(i=0;i<a;++i)o[i]=r;else for(i=0;i<a;++i)o[i]=t(e,r,n+1);return o}(t,e,0)}return[]}},function(t,e,r){"use strict";(function(e){var n=r(19),a=r(5),i=0;function o(t,e,r){this.name=t,this.lvalue=e,this.rvalue=r,this.count=0}t.exports=function(t){for(var r=["(",t,")()"].join(""),s=n.parse(r,{range:!0}),u="_inline_"+i+++"_",l=function(t){for(var e=t.body[0].expression.callee.params,r=new Array(e.length),n=0;n<e.length;++n)r[n]=e[n].name;return r}(s),c=new Array(l.length),h=0;h<l.length;++h)c[h]=new o([u,"arg",h,"_"].join(""),!1,!1);for(var f=new Array(r.length),p=(h=0,r.length);h<p;++h)f[h]=r.charAt(h);var d=[],g=[];function y(t,e){for(var r=t.range[0],n=t.range[1],a=r+1;a<n;++a)f[a]="";f[r]=e}var m=1,v=2;return function t(r,n){if(r.parent=n,"MemberExpression"===r.type)r.computed?(t(r.object,r),t(r.property,r)):"ThisExpression"===r.object.type?y(r,function(t){var e="this_"+t.replace(/\_/g,"__");return g.push(e),e}(r.property.name)):t(r.object,r);else{if("ThisExpression"===r.type)throw new Error("cwise-parser: Computed this is not allowed");if("Identifier"===r.type){var a=r.name,i=l.indexOf(a);if(i>=0){var o=c[i],s=function(t){return"AssignmentExpression"===t.parent.type&&t.parent.left===t?"="===t.parent.operator?m:m|v:"UpdateExpression"===t.parent.type?m|v:v}(r);s&m&&(o.lvalue=!0),s&v&&(o.rvalue=!0),++o.count,y(r,o.name)}else(function(t){if("eval"===t)throw new Error("cwise-parser: eval() not allowed");return"undefined"!=typeof window?t in window:void 0!==e?t in e:"undefined"!=typeof self&&t in self})(a)||y(r,function(t){var e=u+t.replace(/\_/g,"__");return d.push(e),e}(a))}else if("Literal"===r.type)"string"==typeof r.value&&y(r,function(t){return"'"+t.replace(/\_/g,"\\_").replace(/\'/g,"'")+"'"}(r.value));else{if("WithStatement"===r.type)throw new Error("cwise-parser: with() statements not allowed");for(var h=Object.keys(r),f=0,p=h.length;f<p;++f)if("parent"!==h[f]){var b=r[h[f]];if(b)if(b instanceof Array)for(var _=0;_<b.length;++_)b[_]&&"string"==typeof b[_].type&&t(b[_],r);else"string"==typeof b.type&&t(b,r)}}}}(s.body[0].expression.callee.body,void 0),a(d),a(g),new function(t,e,r,n){this.body=t,this.args=e,this.thisVars=r,this.localVars=n}(function(t){return f.slice(t.range[0],t.range[1]).join("")}(s.body[0].expression.callee.body),c,g,d)}}).call(this,r(18))},function(t,e){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){var n,a,i;!function(r,o){"use strict";a=[e],void 0===(i="function"==typeof(n=function(t){var e,r,n,a,i,o,s,u,l,c,h,f,p,d,g,y,m,v;function b(t,e){if(!t)throw new Error("ASSERT: "+e)}function _(t){return t>=48&&t<=57}function w(t){return"0123456789abcdefABCDEF".indexOf(t)>=0}function x(t){return"01234567".indexOf(t)>=0}function k(t){return 32===t||9===t||11===t||12===t||160===t||t>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(t)>=0}function S(t){return 10===t||13===t||8232===t||8233===t}function E(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||92===t||t>=128&&s.NonAsciiIdentifierStart.test(String.fromCharCode(t))}function A(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||92===t||t>=128&&s.NonAsciiIdentifierPart.test(String.fromCharCode(t))}function M(t){switch(t){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}}function C(t){return"eval"===t||"arguments"===t}function N(t,e,r,n,a){var i;b("number"==typeof r,"Comment must have valid position"),m.lastCommentStart>=r||(m.lastCommentStart=r,i={type:t,value:e},v.range&&(i.range=[r,n]),v.loc&&(i.loc=a),v.comments.push(i),v.attachComment&&(v.leadingComments.push(i),v.trailingComments.push(i)))}function j(t){var e,r,n,a;for(e=h-t,r={start:{line:f,column:h-p-t}};h<d;)if(n=l.charCodeAt(h),++h,S(n))return v.comments&&(a=l.slice(e+t,h-1),r.end={line:f,column:h-p-1},N("Line",a,e,h-1,r)),13===n&&10===l.charCodeAt(h)&&++h,++f,void(p=h);v.comments&&(a=l.slice(e+t,h),r.end={line:f,column:h-p},N("Line",a,e,h,r))}function I(){var t,e,r,n;for(v.comments&&(t=h-2,e={start:{line:f,column:h-p-2}});h<d;)if(S(r=l.charCodeAt(h)))13===r&&10===l.charCodeAt(h+1)&&++h,++f,p=++h,h>=d&&H({},o.UnexpectedToken,"ILLEGAL");else if(42===r){if(47===l.charCodeAt(h+1))return++h,++h,void(v.comments&&(n=l.slice(t+2,h-2),e.end={line:f,column:h-p},N("Block",n,t,h,e)));++h}else++h;H({},o.UnexpectedToken,"ILLEGAL")}function F(){var t,e;for(e=0===h;h<d;)if(k(t=l.charCodeAt(h)))++h;else if(S(t))++h,13===t&&10===l.charCodeAt(h)&&++h,++f,p=h,e=!0;else if(47===t)if(47===(t=l.charCodeAt(h+1)))++h,++h,j(2),e=!0;else{if(42!==t)break;++h,++h,I()}else if(e&&45===t){if(45!==l.charCodeAt(h+1)||62!==l.charCodeAt(h+2))break;h+=3,j(3)}else{if(60!==t)break;if("!--"!==l.slice(h+1,h+4))break;++h,++h,++h,++h,j(4)}}function L(t){var e,r,n,a=0;for(r="u"===t?4:2,e=0;e<r;++e){if(!(h<d&&w(l[h])))return"";n=l[h++],a=16*a+"0123456789abcdef".indexOf(n.toLowerCase())}return String.fromCharCode(a)}function V(){var t,e;for(t=l.charCodeAt(h++),e=String.fromCharCode(t),92===t&&(117!==l.charCodeAt(h)&&H({},o.UnexpectedToken,"ILLEGAL"),++h,(t=L("u"))&&"\\"!==t&&E(t.charCodeAt(0))||H({},o.UnexpectedToken,"ILLEGAL"),e=t);h<d&&A(t=l.charCodeAt(h));)++h,e+=String.fromCharCode(t),92===t&&(e=e.substr(0,e.length-1),117!==l.charCodeAt(h)&&H({},o.UnexpectedToken,"ILLEGAL"),++h,(t=L("u"))&&"\\"!==t&&A(t.charCodeAt(0))||H({},o.UnexpectedToken,"ILLEGAL"),e+=t);return e}function P(){var t,r;return t=h,r=92===l.charCodeAt(h)?V():function(){var t,e;t=h++;for(;h<d;){if(92===(e=l.charCodeAt(h)))return h=t,V();if(!A(e))break;++h}return l.slice(t,h)}(),{type:1===r.length?e.Identifier:function(t){if(c&&M(t))return!0;switch(t.length){case 2:return"if"===t||"in"===t||"do"===t;case 3:return"var"===t||"for"===t||"new"===t||"try"===t||"let"===t;case 4:return"this"===t||"else"===t||"case"===t||"void"===t||"with"===t||"enum"===t;case 5:return"while"===t||"break"===t||"catch"===t||"throw"===t||"const"===t||"yield"===t||"class"===t||"super"===t;case 6:return"return"===t||"typeof"===t||"delete"===t||"switch"===t||"export"===t||"import"===t;case 7:return"default"===t||"finally"===t||"extends"===t;case 8:return"function"===t||"continue"===t||"debugger"===t;case 10:return"instanceof"===t;default:return!1}}(r)?e.Keyword:"null"===r?e.NullLiteral:"true"===r||"false"===r?e.BooleanLiteral:e.Identifier,value:r,lineNumber:f,lineStart:p,start:t,end:h}}function O(){var t,r,n,a,i=h,s=l.charCodeAt(h),u=l[h];switch(s){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++h,v.tokenize&&(40===s?v.openParenToken=v.tokens.length:123===s&&(v.openCurlyToken=v.tokens.length)),{type:e.Punctuator,value:String.fromCharCode(s),lineNumber:f,lineStart:p,start:i,end:h};default:if(61===(t=l.charCodeAt(h+1)))switch(s){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return h+=2,{type:e.Punctuator,value:String.fromCharCode(s)+String.fromCharCode(t),lineNumber:f,lineStart:p,start:i,end:h};case 33:case 61:return h+=2,61===l.charCodeAt(h)&&++h,{type:e.Punctuator,value:l.slice(i,h),lineNumber:f,lineStart:p,start:i,end:h}}}return">>>="===(a=l.substr(h,4))?(h+=4,{type:e.Punctuator,value:a,lineNumber:f,lineStart:p,start:i,end:h}):">>>"===(n=a.substr(0,3))||"<<="===n||">>="===n?(h+=3,{type:e.Punctuator,value:n,lineNumber:f,lineStart:p,start:i,end:h}):(r=n.substr(0,2),u===r[1]&&"+-<>&|".indexOf(u)>=0||"=>"===r?(h+=2,{type:e.Punctuator,value:r,lineNumber:f,lineStart:p,start:i,end:h}):"<>=!+-*%&|^/".indexOf(u)>=0?(++h,{type:e.Punctuator,value:u,lineNumber:f,lineStart:p,start:i,end:h}):void H({},o.UnexpectedToken,"ILLEGAL"))}function T(){var t,r,n;if(b(_((n=l[h]).charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),r=h,t="","."!==n){if(t=l[h++],n=l[h],"0"===t){if("x"===n||"X"===n)return++h,function(t){var r="";for(;h<d&&w(l[h]);)r+=l[h++];0===r.length&&H({},o.UnexpectedToken,"ILLEGAL");E(l.charCodeAt(h))&&H({},o.UnexpectedToken,"ILLEGAL");return{type:e.NumericLiteral,value:parseInt("0x"+r,16),lineNumber:f,lineStart:p,start:t,end:h}}(r);if(x(n)&&function(){var t,e;for(t=h+1;t<d;++t){if("8"===(e=l[t])||"9"===e)return!1;if(!x(e))return!0}return!0}())return function(t){var r="0"+l[h++];for(;h<d&&x(l[h]);)r+=l[h++];(E(l.charCodeAt(h))||_(l.charCodeAt(h)))&&H({},o.UnexpectedToken,"ILLEGAL");return{type:e.NumericLiteral,value:parseInt(r,8),octal:!0,lineNumber:f,lineStart:p,start:t,end:h}}(r)}for(;_(l.charCodeAt(h));)t+=l[h++];n=l[h]}if("."===n){for(t+=l[h++];_(l.charCodeAt(h));)t+=l[h++];n=l[h]}if("e"===n||"E"===n)if(t+=l[h++],"+"!==(n=l[h])&&"-"!==n||(t+=l[h++]),_(l.charCodeAt(h)))for(;_(l.charCodeAt(h));)t+=l[h++];else H({},o.UnexpectedToken,"ILLEGAL");return E(l.charCodeAt(h))&&H({},o.UnexpectedToken,"ILLEGAL"),{type:e.NumericLiteral,value:parseFloat(t),lineNumber:f,lineStart:p,start:r,end:h}}function q(){var t,r,n,a;return y=null,F(),t=h,r=function(){var t,e,r,n;b("/"===(t=l[h]),"Regular expression literal must start with a slash"),e=l[h++],r=!1,n=!1;for(;h<d;)if(t=l[h++],e+=t,"\\"===t)S((t=l[h++]).charCodeAt(0))&&H({},o.UnterminatedRegExp),e+=t;else if(S(t.charCodeAt(0)))H({},o.UnterminatedRegExp);else if(r)"]"===t&&(r=!1);else{if("/"===t){n=!0;break}"["===t&&(r=!0)}n||H({},o.UnterminatedRegExp);return{value:e.substr(1,e.length-2),literal:e}}(),n=function(){var t,e,r,n;e="",r="";for(;h<d&&A((t=l[h]).charCodeAt(0));)if(++h,"\\"===t&&h<d)if("u"===(t=l[h])){if(n=++h,t=L("u"))for(r+=t,e+="\\u";n<h;++n)e+=l[n];else h=n,r+="u",e+="\\u";G({},o.UnexpectedToken,"ILLEGAL")}else e+="\\",G({},o.UnexpectedToken,"ILLEGAL");else r+=t,e+=t;return{value:r,literal:e}}(),a=function(t,e){var r;try{r=new RegExp(t,e)}catch(t){H({},o.InvalidRegExp)}return r}(r.value,n.value),v.tokenize?{type:e.RegularExpression,value:a,lineNumber:f,lineStart:p,start:t,end:h}:{literal:r.literal+n.literal,value:a,start:t,end:h}}function R(){var t,e,r,n;return F(),t=h,e={start:{line:f,column:h-p}},r=q(),e.end={line:f,column:h-p},v.tokenize||(v.tokens.length>0&&(n=v.tokens[v.tokens.length-1]).range[0]===t&&"Punctuator"===n.type&&("/"!==n.value&&"/="!==n.value||v.tokens.pop()),v.tokens.push({type:"RegularExpression",value:r.literal,range:[t,h],loc:e})),r}function D(){var t;return F(),h>=d?{type:e.EOF,lineNumber:f,lineStart:p,start:h,end:h}:E(t=l.charCodeAt(h))?P():40===t||41===t||59===t?O():39===t||34===t?function(){var t,r,n,a,i,s,u,c,g="",y=!1;u=f,c=p,b("'"===(t=l[h])||'"'===t,"String literal must starts with a quote"),r=h,++h;for(;h<d;){if((n=l[h++])===t){t="";break}if("\\"===n)if((n=l[h++])&&S(n.charCodeAt(0)))++f,"\r"===n&&"\n"===l[h]&&++h,p=h;else switch(n){case"u":case"x":s=h,(i=L(n))?g+=i:(h=s,g+=n);break;case"n":g+="\n";break;case"r":g+="\r";break;case"t":g+="\t";break;case"b":g+="\b";break;case"f":g+="\f";break;case"v":g+="\v";break;default:x(n)?(0!==(a="01234567".indexOf(n))&&(y=!0),h<d&&x(l[h])&&(y=!0,a=8*a+"01234567".indexOf(l[h++]),"0123".indexOf(n)>=0&&h<d&&x(l[h])&&(a=8*a+"01234567".indexOf(l[h++]))),g+=String.fromCharCode(a)):g+=n}else{if(S(n.charCodeAt(0)))break;g+=n}}""!==t&&H({},o.UnexpectedToken,"ILLEGAL");return{type:e.StringLiteral,value:g,octal:y,startLineNumber:u,startLineStart:c,lineNumber:f,lineStart:p,start:r,end:h}}():46===t?_(l.charCodeAt(h+1))?T():O():_(t)?T():v.tokenize&&47===t?function(){var t,e;if(!(t=v.tokens[v.tokens.length-1]))return R();if("Punctuator"===t.type){if("]"===t.value)return O();if(")"===t.value)return!(e=v.tokens[v.openParenToken-1])||"Keyword"!==e.type||"if"!==e.value&&"while"!==e.value&&"for"!==e.value&&"with"!==e.value?O():R();if("}"===t.value){if(v.tokens[v.openCurlyToken-3]&&"Keyword"===v.tokens[v.openCurlyToken-3].type){if(!(e=v.tokens[v.openCurlyToken-4]))return O()}else{if(!v.tokens[v.openCurlyToken-4]||"Keyword"!==v.tokens[v.openCurlyToken-4].type)return O();if(!(e=v.tokens[v.openCurlyToken-5]))return R()}return n.indexOf(e.value)>=0?O():R()}return R()}if("Keyword"===t.type&&"this"!==t.value)return R();return O()}():O()}function U(){var t,n,a;return F(),t={start:{line:f,column:h-p}},n=D(),t.end={line:f,column:h-p},n.type!==e.EOF&&(a=l.slice(n.start,n.end),v.tokens.push({type:r[n.type],value:a,range:[n.start,n.end],loc:t})),n}function B(){var t;return h=(t=y).end,f=t.lineNumber,p=t.lineStart,y=void 0!==v.tokens?U():D(),h=t.end,f=t.lineNumber,p=t.lineStart,t}function z(){var t,e,r;t=h,e=f,r=p,y=void 0!==v.tokens?U():D(),h=t,f=e,p=r}function W(t,e){this.line=t,this.column=e}function X(){var t,e,r,n;return t=h,e=f,r=p,F(),n=f!==e,h=t,f=e,p=r,n}function H(t,e){var r,n=Array.prototype.slice.call(arguments,2),a=e.replace(/%(\d)/g,function(t,e){return b(e<n.length,"Message reference must be in range"),n[e]});throw"number"==typeof t.lineNumber?((r=new Error("Line "+t.lineNumber+": "+a)).index=t.start,r.lineNumber=t.lineNumber,r.column=t.start-p+1):((r=new Error("Line "+f+": "+a)).index=h,r.lineNumber=f,r.column=h-p+1),r.description=a,r}function G(){try{H.apply(null,arguments)}catch(t){if(!v.errors)throw t;v.errors.push(t)}}function Y(t){if(t.type===e.EOF&&H(t,o.UnexpectedEOS),t.type===e.NumericLiteral&&H(t,o.UnexpectedNumber),t.type===e.StringLiteral&&H(t,o.UnexpectedString),t.type===e.Identifier&&H(t,o.UnexpectedIdentifier),t.type===e.Keyword){if(function(t){switch(t){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}}(t.value))H(t,o.UnexpectedReserved);else if(c&&M(t.value))return void G(t,o.StrictReservedWord);H(t,o.UnexpectedToken,t.value)}H(t,o.UnexpectedToken,t.value)}function $(t){var r=B();r.type===e.Punctuator&&r.value===t||Y(r)}function K(t){var r=B();r.type===e.Keyword&&r.value===t||Y(r)}function Z(t){return y.type===e.Punctuator&&y.value===t}function J(t){return y.type===e.Keyword&&y.value===t}function Q(){var t,r=h,n=f,a=p,i=y;if(59===l.charCodeAt(h)||Z(";"))B();else{if(t=f,F(),f!==t)return h=r,f=n,p=a,void(y=i);y.type===e.EOF||Z("}")||Y(y)}}function tt(t){return t.type===a.Identifier||t.type===a.MemberExpression}function et(t,e){var r,n,a;return r=c,a=y,n=St(),e&&c&&C(t[0].name)&&G(e,o.StrictParamName),c=r,g.markEnd(g.createFunctionExpression(null,t,[],n),a)}function rt(){var t,r;return r=y,(t=B()).type===e.StringLiteral||t.type===e.NumericLiteral?(c&&t.octal&&G(t,o.StrictOctalLiteral),g.markEnd(g.createLiteral(t),r)):g.markEnd(g.createIdentifier(t.value),r)}function nt(){var t,r,n,a,i,s;return s=y,(t=y).type===e.Identifier?(n=rt(),"get"!==t.value||Z(":")?"set"!==t.value||Z(":")?($(":"),a=dt(),g.markEnd(g.createProperty("init",n,a),s)):(r=rt(),$("("),(t=y).type!==e.Identifier?($(")"),G(t,o.UnexpectedToken,t.value),a=et([])):(i=[mt()],$(")"),a=et(i,t)),g.markEnd(g.createProperty("set",r,a),s)):(r=rt(),$("("),$(")"),a=et([]),g.markEnd(g.createProperty("get",r,a),s))):t.type!==e.EOF&&t.type!==e.Punctuator?(r=rt(),$(":"),a=dt(),g.markEnd(g.createProperty("init",r,a),s)):void Y(t)}function at(){var t,r,n,s;if(Z("("))return function(){var t;return $("("),t=gt(),$(")"),t}();if(Z("["))return function(){var t,e=[];t=y,$("[");for(;!Z("]");)Z(",")?(B(),e.push(null)):(e.push(dt()),Z("]")||$(","));return B(),g.markEnd(g.createArrayExpression(e),t)}();if(Z("{"))return function(){var t,e,r,n,s,u=[],l={},h=String;s=y,$("{");for(;!Z("}");)t=nt(),e=t.key.type===a.Identifier?t.key.name:h(t.key.value),n="init"===t.kind?i.Data:"get"===t.kind?i.Get:i.Set,r="$"+e,Object.prototype.hasOwnProperty.call(l,r)?(l[r]===i.Data?c&&n===i.Data?G({},o.StrictDuplicateProperty):n!==i.Data&&G({},o.AccessorDataProperty):n===i.Data?G({},o.AccessorDataProperty):l[r]&n&&G({},o.AccessorGetSet),l[r]|=n):l[r]=n,u.push(t),Z("}")||$(",");return $("}"),g.markEnd(g.createObjectExpression(u),s)}();if(t=y.type,s=y,t===e.Identifier)n=g.createIdentifier(B().value);else if(t===e.StringLiteral||t===e.NumericLiteral)c&&y.octal&&G(y,o.StrictOctalLiteral),n=g.createLiteral(B());else if(t===e.Keyword){if(J("function"))return function(){var t,e,r,n,a,i,s,u,l=null,h=[];u=y,K("function"),Z("(")||(t=y,l=mt(),c?C(t.value)&&G(t,o.StrictFunctionName):C(t.value)?(r=t,n=o.StrictFunctionName):M(t.value)&&(r=t,n=o.StrictReservedWord));a=Et(r),h=a.params,e=a.stricted,r=a.firstRestricted,a.message&&(n=a.message);s=c,i=St(),c&&r&&H(r,n);c&&e&&G(e,n);return c=s,g.markEnd(g.createFunctionExpression(l,h,[],i),u)}();J("this")?(B(),n=g.createThisExpression()):Y(B())}else t===e.BooleanLiteral?((r=B()).value="true"===r.value,n=g.createLiteral(r)):t===e.NullLiteral?((r=B()).value=null,n=g.createLiteral(r)):Z("/")||Z("/=")?(n=void 0!==v.tokens?g.createLiteral(R()):g.createLiteral(q()),z()):Y(B());return g.markEnd(n,s)}function it(){var t=[];if($("("),!Z(")"))for(;h<d&&(t.push(dt()),!Z(")"));)$(",");return $(")"),t}function ot(){var t,r;return r=y,function(t){return t.type===e.Identifier||t.type===e.Keyword||t.type===e.BooleanLiteral||t.type===e.NullLiteral}(t=B())||Y(t),g.markEnd(g.createIdentifier(t.value),r)}function st(){return $("."),ot()}function ut(){var t;return $("["),t=gt(),$("]"),t}function lt(){var t,e,r;return r=y,K("new"),t=function(){var t,e,r;b(m.allowIn,"callee of new expression always allow in keyword."),r=y,t=J("new")?lt():at();for(;Z(".")||Z("[");)Z("[")?(e=ut(),t=g.createMemberExpression("[",t,e)):(e=st(),t=g.createMemberExpression(".",t,e)),g.markEnd(t,r);return t}(),e=Z("(")?it():[],g.markEnd(g.createNewExpression(t,e),r)}function ct(){var t,r,n=y;return t=function(){var t,e,r,n,a=m.allowIn;for(n=y,m.allowIn=!0,t=J("new")?lt():at();;){if(Z("."))r=st(),t=g.createMemberExpression(".",t,r);else if(Z("("))e=it(),t=g.createCallExpression(t,e);else{if(!Z("["))break;r=ut(),t=g.createMemberExpression("[",t,r)}g.markEnd(t,n)}return m.allowIn=a,t}(),y.type===e.Punctuator&&(!Z("++")&&!Z("--")||X()||(c&&t.type===a.Identifier&&C(t.name)&&G({},o.StrictLHSPostfix),tt(t)||G({},o.InvalidLHSInAssignment),r=B(),t=g.markEnd(g.createPostfixExpression(r.value,t),n))),t}function ht(){var t,r,n;return y.type!==e.Punctuator&&y.type!==e.Keyword?r=ct():Z("++")||Z("--")?(n=y,t=B(),r=ht(),c&&r.type===a.Identifier&&C(r.name)&&G({},o.StrictLHSPrefix),tt(r)||G({},o.InvalidLHSInAssignment),r=g.createUnaryExpression(t.value,r),r=g.markEnd(r,n)):Z("+")||Z("-")||Z("~")||Z("!")?(n=y,t=B(),r=ht(),r=g.createUnaryExpression(t.value,r),r=g.markEnd(r,n)):J("delete")||J("void")||J("typeof")?(n=y,t=B(),r=ht(),r=g.createUnaryExpression(t.value,r),r=g.markEnd(r,n),c&&"delete"===r.operator&&r.argument.type===a.Identifier&&G({},o.StrictDelete)):r=ct(),r}function ft(t,r){var n=0;if(t.type!==e.Punctuator&&t.type!==e.Keyword)return 0;switch(t.value){case"||":n=1;break;case"&&":n=2;break;case"|":n=3;break;case"^":n=4;break;case"&":n=5;break;case"==":case"!=":case"===":case"!==":n=6;break;case"<":case">":case"<=":case">=":case"instanceof":n=7;break;case"in":n=r?7:0;break;case"<<":case">>":case">>>":n=8;break;case"+":case"-":n=9;break;case"*":case"/":case"%":n=11}return n}function pt(){var t,e,r,n,a;return a=y,t=function(){var t,e,r,n,a,i,o,s,u,l;if(t=y,u=ht(),0===(a=ft(n=y,m.allowIn)))return u;n.prec=a,B(),e=[t,y],o=ht(),i=[u,n,o];for(;(a=ft(y,m.allowIn))>0;){for(;i.length>2&&a<=i[i.length-2].prec;)o=i.pop(),s=i.pop().value,u=i.pop(),r=g.createBinaryExpression(s,u,o),e.pop(),t=e[e.length-1],g.markEnd(r,t),i.push(r);(n=B()).prec=a,i.push(n),e.push(y),r=ht(),i.push(r)}l=i.length-1,r=i[l],e.pop();for(;l>1;)r=g.createBinaryExpression(i[l-1].value,i[l-2],r),l-=2,t=e.pop(),g.markEnd(r,t);return r}(),Z("?")&&(B(),e=m.allowIn,m.allowIn=!0,r=dt(),m.allowIn=e,$(":"),n=dt(),t=g.createConditionalExpression(t,r,n),g.markEnd(t,a)),t}function dt(){var t,r,n,i,s;return t=y,s=y,i=r=pt(),function(){var t;if(y.type!==e.Punctuator)return!1;return"="===(t=y.value)||"*="===t||"/="===t||"%="===t||"+="===t||"-="===t||"<<="===t||">>="===t||">>>="===t||"&="===t||"^="===t||"|="===t}()&&(tt(r)||G({},o.InvalidLHSInAssignment),c&&r.type===a.Identifier&&C(r.name)&&G(t,o.StrictLHSAssignment),t=B(),n=dt(),i=g.markEnd(g.createAssignmentExpression(t.value,r,n),s)),i}function gt(){var t,e=y;if(t=dt(),Z(",")){for(t=g.createSequenceExpression([t]);h<d&&Z(",");)B(),t.expressions.push(dt());g.markEnd(t,e)}return t}function yt(){var t,e;return e=y,$("{"),t=function(){var t,e=[];for(;h<d&&!Z("}")&&void 0!==(t=Mt());)e.push(t);return e}(),$("}"),g.markEnd(g.createBlockStatement(t),e)}function mt(){var t,r;return r=y,(t=B()).type!==e.Identifier&&Y(t),g.markEnd(g.createIdentifier(t.value),r)}function vt(t){var e,r,n=null;return r=y,e=mt(),c&&C(e.name)&&G({},o.StrictVarName),"const"===t?($("="),n=dt()):Z("=")&&(B(),n=dt()),g.markEnd(g.createVariableDeclarator(e,n),r)}function bt(t){var e=[];do{if(e.push(vt(t)),!Z(","))break;B()}while(h<d);return e}function _t(){var t,e,r,n,a,i,s,u=m.allowIn;return t=e=r=null,K("for"),$("("),Z(";")?B():(J("var")||J("let")?(m.allowIn=!1,t=function(){var t,e,r;return r=y,t=B(),e=bt(),g.markEnd(g.createVariableDeclaration(e,t.value),r)}(),m.allowIn=u,1===t.declarations.length&&J("in")&&(B(),n=t,a=gt(),t=null)):(m.allowIn=!1,t=gt(),m.allowIn=u,J("in")&&(tt(t)||G({},o.InvalidLHSInForIn),B(),n=t,a=gt(),t=null)),void 0===n&&$(";")),void 0===n&&(Z(";")||(e=gt()),$(";"),Z(")")||(r=gt())),$(")"),s=m.inIteration,m.inIteration=!0,i=kt(),m.inIteration=s,void 0===n?g.createForStatement(t,e,r,i):g.createForInStatement(n,a,i)}function wt(){var t,e,r,n=[];for(r=y,J("default")?(B(),t=null):(K("case"),t=gt()),$(":");h<d&&!(Z("}")||J("default")||J("case"));)e=kt(),n.push(e);return g.markEnd(g.createSwitchCase(t,n),r)}function xt(){var t,e=[],r=null;return K("try"),t=yt(),J("catch")&&e.push(function(){var t,e,r;r=y,K("catch"),$("("),Z(")")&&Y(y);t=mt(),c&&C(t.name)&&G({},o.StrictCatchVariable);return $(")"),e=yt(),g.markEnd(g.createCatchClause(t,e),r)}()),J("finally")&&(B(),r=yt()),0!==e.length||r||H({},o.NoCatchOrFinally),g.createTryStatement(t,[],e,r)}function kt(){var t,r,n,i,s=y.type;if(s===e.EOF&&Y(y),s===e.Punctuator&&"{"===y.value)return yt();if(i=y,s===e.Punctuator)switch(y.value){case";":return g.markEnd(($(";"),g.createEmptyStatement()),i);case"(":return g.markEnd(function(){var t=gt();return Q(),g.createExpressionStatement(t)}(),i)}if(s===e.Keyword)switch(y.value){case"break":return g.markEnd(function(){var t,r=null;if(K("break"),59===l.charCodeAt(h))return B(),m.inIteration||m.inSwitch||H({},o.IllegalBreak),g.createBreakStatement(null);if(X())return m.inIteration||m.inSwitch||H({},o.IllegalBreak),g.createBreakStatement(null);y.type===e.Identifier&&(r=mt(),t="$"+r.name,Object.prototype.hasOwnProperty.call(m.labelSet,t)||H({},o.UnknownLabel,r.name));Q(),null!==r||m.inIteration||m.inSwitch||H({},o.IllegalBreak);return g.createBreakStatement(r)}(),i);case"continue":return g.markEnd(function(){var t,r=null;if(K("continue"),59===l.charCodeAt(h))return B(),m.inIteration||H({},o.IllegalContinue),g.createContinueStatement(null);if(X())return m.inIteration||H({},o.IllegalContinue),g.createContinueStatement(null);y.type===e.Identifier&&(r=mt(),t="$"+r.name,Object.prototype.hasOwnProperty.call(m.labelSet,t)||H({},o.UnknownLabel,r.name));Q(),null!==r||m.inIteration||H({},o.IllegalContinue);return g.createContinueStatement(r)}(),i);case"debugger":return g.markEnd((K("debugger"),Q(),g.createDebuggerStatement()),i);case"do":return g.markEnd(function(){var t,e,r;K("do"),r=m.inIteration,m.inIteration=!0,t=kt(),m.inIteration=r,K("while"),$("("),e=gt(),$(")"),Z(";")&&B();return g.createDoWhileStatement(t,e)}(),i);case"for":return g.markEnd(_t(),i);case"function":return g.markEnd(At(),i);case"if":return g.markEnd(function(){var t,e,r;K("if"),$("("),t=gt(),$(")"),e=kt(),J("else")?(B(),r=kt()):r=null;return g.createIfStatement(t,e,r)}(),i);case"return":return g.markEnd(function(){var t=null;K("return"),m.inFunctionBody||G({},o.IllegalReturn);if(32===l.charCodeAt(h)&&E(l.charCodeAt(h+1)))return t=gt(),Q(),g.createReturnStatement(t);if(X())return g.createReturnStatement(null);Z(";")||Z("}")||y.type===e.EOF||(t=gt());return Q(),g.createReturnStatement(t)}(),i);case"switch":return g.markEnd(function(){var t,e,r,n,a;if(K("switch"),$("("),t=gt(),$(")"),$("{"),e=[],Z("}"))return B(),g.createSwitchStatement(t,e);n=m.inSwitch,m.inSwitch=!0,a=!1;for(;h<d&&!Z("}");)null===(r=wt()).test&&(a&&H({},o.MultipleDefaultsInSwitch),a=!0),e.push(r);return m.inSwitch=n,$("}"),g.createSwitchStatement(t,e)}(),i);case"throw":return g.markEnd(function(){var t;K("throw"),X()&&H({},o.NewlineAfterThrow);return t=gt(),Q(),g.createThrowStatement(t)}(),i);case"try":return g.markEnd(xt(),i);case"var":return g.markEnd(function(){var t;return K("var"),t=bt(),Q(),g.createVariableDeclaration(t,"var")}(),i);case"while":return g.markEnd(function(){var t,e,r;return K("while"),$("("),t=gt(),$(")"),r=m.inIteration,m.inIteration=!0,e=kt(),m.inIteration=r,g.createWhileStatement(t,e)}(),i);case"with":return g.markEnd(function(){var t,e;c&&(F(),G({},o.StrictModeWith));return K("with"),$("("),t=gt(),$(")"),e=kt(),g.createWithStatement(t,e)}(),i)}return(t=gt()).type===a.Identifier&&Z(":")?(B(),n="$"+t.name,Object.prototype.hasOwnProperty.call(m.labelSet,n)&&H({},o.Redeclaration,"Label",t.name),m.labelSet[n]=!0,r=kt(),delete m.labelSet[n],g.markEnd(g.createLabeledStatement(t,r),i)):(Q(),g.markEnd(g.createExpressionStatement(t),i))}function St(){var t,r,n,i,s,u,f,p,v=[];for(p=y,$("{");h<d&&y.type===e.StringLiteral&&(r=y,t=Mt(),v.push(t),t.expression.type===a.Literal);)"use strict"===l.slice(r.start+1,r.end-1)?(c=!0,n&&G(n,o.StrictOctalLiteral)):!n&&r.octal&&(n=r);for(i=m.labelSet,s=m.inIteration,u=m.inSwitch,f=m.inFunctionBody,m.labelSet={},m.inIteration=!1,m.inSwitch=!1,m.inFunctionBody=!0;h<d&&!Z("}")&&void 0!==(t=Mt());)v.push(t);return $("}"),m.labelSet=i,m.inIteration=s,m.inSwitch=u,m.inFunctionBody=f,g.markEnd(g.createBlockStatement(v),p)}function Et(t){var e,r,n,a,i,s,u=[];if($("("),!Z(")"))for(a={};h<d&&(r=y,e=mt(),i="$"+r.value,c?(C(r.value)&&(n=r,s=o.StrictParamName),Object.prototype.hasOwnProperty.call(a,i)&&(n=r,s=o.StrictParamDupe)):t||(C(r.value)?(t=r,s=o.StrictParamName):M(r.value)?(t=r,s=o.StrictReservedWord):Object.prototype.hasOwnProperty.call(a,i)&&(t=r,s=o.StrictParamDupe)),u.push(e),a[i]=!0,!Z(")"));)$(",");return $(")"),{params:u,stricted:n,firstRestricted:t,message:s}}function At(){var t,e,r,n,a,i,s,u,l,h=[];return l=y,K("function"),r=y,t=mt(),c?C(r.value)&&G(r,o.StrictFunctionName):C(r.value)?(i=r,s=o.StrictFunctionName):M(r.value)&&(i=r,s=o.StrictReservedWord),a=Et(i),h=a.params,n=a.stricted,i=a.firstRestricted,a.message&&(s=a.message),u=c,e=St(),c&&i&&H(i,s),c&&n&&G(n,s),c=u,g.markEnd(g.createFunctionDeclaration(t,h,[],e),l)}function Mt(){if(y.type===e.Keyword)switch(y.value){case"const":case"let":return function(t){var e,r;return r=y,K(t),e=bt(t),Q(),g.markEnd(g.createVariableDeclaration(e,t),r)}(y.value);case"function":return At();default:return kt()}if(y.type!==e.EOF)return kt()}function Ct(){var t,r;return F(),z(),r=y,c=!1,t=function(){var t,r,n,i=[];for(;h<d&&(r=y).type===e.StringLiteral&&(t=Mt(),i.push(t),t.expression.type===a.Literal);)"use strict"===l.slice(r.start+1,r.end-1)?(c=!0,n&&G(n,o.StrictOctalLiteral)):!n&&r.octal&&(n=r);for(;h<d&&void 0!==(t=Mt());)i.push(t);return i}(),g.markEnd(g.createProgram(t),r)}function Nt(){var t,e,r,n=[];for(t=0;t<v.tokens.length;++t)e=v.tokens[t],r={type:e.type,value:e.value},v.range&&(r.range=e.range),v.loc&&(r.loc=e.loc),n.push(r);v.tokens=n}(r={})[(e={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9}).BooleanLiteral]="Boolean",r[e.EOF]="<end>",r[e.Identifier]="Identifier",r[e.Keyword]="Keyword",r[e.NullLiteral]="Null",r[e.NumericLiteral]="Numeric",r[e.Punctuator]="Punctuator",r[e.StringLiteral]="String",r[e.RegularExpression]="RegularExpression",n=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="],a={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"},i={Data:1,Get:2,Set:4},o={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"},s={NonAsciiIdentifierStart:new RegExp("[------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]"),NonAsciiIdentifierPart:new RegExp("[------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]")},u={name:"SyntaxTree",processComment:function(t){var e,r;if(!(t.type===a.Program&&t.body.length>0)){for(v.trailingComments.length>0?v.trailingComments[0].range[0]>=t.range[1]?(r=v.trailingComments,v.trailingComments=[]):v.trailingComments.length=0:v.bottomRightStack.length>0&&v.bottomRightStack[v.bottomRightStack.length-1].trailingComments&&v.bottomRightStack[v.bottomRightStack.length-1].trailingComments[0].range[0]>=t.range[1]&&(r=v.bottomRightStack[v.bottomRightStack.length-1].trailingComments,delete v.bottomRightStack[v.bottomRightStack.length-1].trailingComments);v.bottomRightStack.length>0&&v.bottomRightStack[v.bottomRightStack.length-1].range[0]>=t.range[0];)e=v.bottomRightStack.pop();e?e.leadingComments&&e.leadingComments[e.leadingComments.length-1].range[1]<=t.range[0]&&(t.leadingComments=e.leadingComments,delete e.leadingComments):v.leadingComments.length>0&&v.leadingComments[v.leadingComments.length-1].range[1]<=t.range[0]&&(t.leadingComments=v.leadingComments,v.leadingComments=[]),r&&(t.trailingComments=r),v.bottomRightStack.push(t)}},markEnd:function(t,e){return v.range&&(t.range=[e.start,h]),v.loc&&(t.loc=new function(t,e,r,n){this.start=new W(t,e),this.end=new W(r,n)}(void 0===e.startLineNumber?e.lineNumber:e.startLineNumber,e.start-(void 0===e.startLineStart?e.lineStart:e.startLineStart),f,h-p),this.postProcess(t)),v.attachComment&&this.processComment(t),t},postProcess:function(t){return v.source&&(t.loc.source=v.source),t},createArrayExpression:function(t){return{type:a.ArrayExpression,elements:t}},createAssignmentExpression:function(t,e,r){return{type:a.AssignmentExpression,operator:t,left:e,right:r}},createBinaryExpression:function(t,e,r){var n="||"===t||"&&"===t?a.LogicalExpression:a.BinaryExpression;return{type:n,operator:t,left:e,right:r}},createBlockStatement:function(t){return{type:a.BlockStatement,body:t}},createBreakStatement:function(t){return{type:a.BreakStatement,label:t}},createCallExpression:function(t,e){return{type:a.CallExpression,callee:t,arguments:e}},createCatchClause:function(t,e){return{type:a.CatchClause,param:t,body:e}},createConditionalExpression:function(t,e,r){return{type:a.ConditionalExpression,test:t,consequent:e,alternate:r}},createContinueStatement:function(t){return{type:a.ContinueStatement,label:t}},createDebuggerStatement:function(){return{type:a.DebuggerStatement}},createDoWhileStatement:function(t,e){return{type:a.DoWhileStatement,body:t,test:e}},createEmptyStatement:function(){return{type:a.EmptyStatement}},createExpressionStatement:function(t){return{type:a.ExpressionStatement,expression:t}},createForStatement:function(t,e,r,n){return{type:a.ForStatement,init:t,test:e,update:r,body:n}},createForInStatement:function(t,e,r){return{type:a.ForInStatement,left:t,right:e,body:r,each:!1}},createFunctionDeclaration:function(t,e,r,n){return{type:a.FunctionDeclaration,id:t,params:e,defaults:r,body:n,rest:null,generator:!1,expression:!1}},createFunctionExpression:function(t,e,r,n){return{type:a.FunctionExpression,id:t,params:e,defaults:r,body:n,rest:null,generator:!1,expression:!1}},createIdentifier:function(t){return{type:a.Identifier,name:t}},createIfStatement:function(t,e,r){return{type:a.IfStatement,test:t,consequent:e,alternate:r}},createLabeledStatement:function(t,e){return{type:a.LabeledStatement,label:t,body:e}},createLiteral:function(t){return{type:a.Literal,value:t.value,raw:l.slice(t.start,t.end)}},createMemberExpression:function(t,e,r){return{type:a.MemberExpression,computed:"["===t,object:e,property:r}},createNewExpression:function(t,e){return{type:a.NewExpression,callee:t,arguments:e}},createObjectExpression:function(t){return{type:a.ObjectExpression,properties:t}},createPostfixExpression:function(t,e){return{type:a.UpdateExpression,operator:t,argument:e,prefix:!1}},createProgram:function(t){return{type:a.Program,body:t}},createProperty:function(t,e,r){return{type:a.Property,key:e,value:r,kind:t}},createReturnStatement:function(t){return{type:a.ReturnStatement,argument:t}},createSequenceExpression:function(t){return{type:a.SequenceExpression,expressions:t}},createSwitchCase:function(t,e){return{type:a.SwitchCase,test:t,consequent:e}},createSwitchStatement:function(t,e){return{type:a.SwitchStatement,discriminant:t,cases:e}},createThisExpression:function(){return{type:a.ThisExpression}},createThrowStatement:function(t){return{type:a.ThrowStatement,argument:t}},createTryStatement:function(t,e,r,n){return{type:a.TryStatement,block:t,guardedHandlers:e,handlers:r,finalizer:n}},createUnaryExpression:function(t,e){return"++"===t||"--"===t?{type:a.UpdateExpression,operator:t,argument:e,prefix:!0}:{type:a.UnaryExpression,operator:t,argument:e,prefix:!0}},createVariableDeclaration:function(t,e){return{type:a.VariableDeclaration,declarations:t,kind:e}},createVariableDeclarator:function(t,e){return{type:a.VariableDeclarator,id:t,init:e}},createWhileStatement:function(t,e){return{type:a.WhileStatement,test:t,body:e}},createWithStatement:function(t,e){return{type:a.WithStatement,object:t,body:e}}},t.version="1.2.5",t.tokenize=function(t,r){var n,a;n=String,"string"==typeof t||t instanceof String||(t=n(t));g=u,h=0,f=(l=t).length>0?1:0,p=0,d=l.length,y=null,m={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},v={},(r=r||{}).tokens=!0,v.tokens=[],v.tokenize=!0,v.openParenToken=-1,v.openCurlyToken=-1,v.range="boolean"==typeof r.range&&r.range,v.loc="boolean"==typeof r.loc&&r.loc,"boolean"==typeof r.comment&&r.comment&&(v.comments=[]);"boolean"==typeof r.tolerant&&r.tolerant&&(v.errors=[]);try{if(z(),y.type===e.EOF)return v.tokens;for(B();y.type!==e.EOF;)try{B()}catch(t){if(y,v.errors){v.errors.push(t);break}throw t}Nt(),a=v.tokens,void 0!==v.comments&&(a.comments=v.comments),void 0!==v.errors&&(a.errors=v.errors)}catch(t){throw t}finally{v={}}return a},t.parse=function(t,e){var r,n;n=String,"string"==typeof t||t instanceof String||(t=n(t));g=u,h=0,f=(l=t).length>0?1:0,p=0,d=l.length,y=null,m={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},v={},void 0!==e&&(v.range="boolean"==typeof e.range&&e.range,v.loc="boolean"==typeof e.loc&&e.loc,v.attachComment="boolean"==typeof e.attachComment&&e.attachComment,v.loc&&null!==e.source&&void 0!==e.source&&(v.source=n(e.source)),"boolean"==typeof e.tokens&&e.tokens&&(v.tokens=[]),"boolean"==typeof e.comment&&e.comment&&(v.comments=[]),"boolean"==typeof e.tolerant&&e.tolerant&&(v.errors=[]),v.attachComment&&(v.range=!0,v.comments=[],v.bottomRightStack=[],v.trailingComments=[],v.leadingComments=[]));try{r=Ct(),void 0!==v.comments&&(r.comments=v.comments),void 0!==v.tokens&&(Nt(),r.tokens=v.tokens),void 0!==v.errors&&(r.errors=v.errors)}catch(t){throw t}finally{v={}}return r},t.Syntax=function(){var t,e={};for(t in"function"==typeof Object.create&&(e=Object.create(null)),a)a.hasOwnProperty(t)&&(e[t]=a[t]);return"function"==typeof Object.freeze&&Object.freeze(e),e}()})?n.apply(e,a):n)||(t.exports=i)}()},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){for(var r=new Float64Array(t*e),i=0;i<r.length;i++)r[i]=1e-4*a();return(0,n.default)(r,[t,e])};var n=function(t){return t&&t.__esModule?t:{default:t}}(r(0));function a(){var t=2*Math.random()-1,e=2*Math.random()-1,r=t*t+e*e;return 0==r||r>1?a():t*Math.sqrt(-2*Math.log(r)/r)}t.exports=e.default},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){for(var r=t.shape[0],i=(0,n.default)(new Float64Array(r*r),[r,r]),l=(0,n.default)(new Float64Array(r*r),[r,r]),c=void 0,h=void 0,f=1/0,p=Math.log(e),d=void 0,g=void 0,y=void 0,m=0;m<r;m++){c=1,h=-1/0,f=1/0;for(var v=0;v<100;v++){for(var b=0;b<r;b++)i.set(m,b,Math.exp(-t.get(m,b)*c));i.set(m,m,0),g=0;for(b=0;b<r;b++)g+=i.get(m,b);0==g&&(g=o),y=0;for(b=0;b<r;b++)i.set(m,b,i.get(m,b)/g),y+=t.get(m,b)*i.get(m,b);if(d=Math.log(g)+c*y-p,Math.abs(d)<=u)break;d>0?(h=c,f==1/0?c*=2:c=(c+f)/2):(f=c,h==-1/0?c/=2:c=(c+h)/2)}c}a.default.add(l,i,i.transpose(1,0));var _=Math.max(a.default.sum(l),s);return a.default.divseq(l,_),a.default.maxseq(l,s),l};var n=i(r(0)),a=i(r(2));function i(t){return t&&t.__esModule?t:{default:t}}var o=1e-7,s=Number.EPSILON||2.220446049250313e-16,u=1e-5;t.exports=e.default},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,r){var i=t.shape[0],s=t.shape[1],c=(0,n.default)(new Float64Array(i*i),[i,i]),h=(0,o.default)(t,"euclidean");l(h);var f=(r+1)/-2;a.default.powseq(a.default.divseq(a.default.addseq(h,1),r),f);for(var p=0;p<i;p++)h.set(p,p,0);var d=Math.max(a.default.sum(h),u);a.default.divs(c,h,d),a.default.maxseq(c,u);var g=(0,n.default)(new Float64Array(i*i),[i,i]),y=(0,n.default)(new Float64Array(i*i),[i,i]);a.default.div(g,e,c),a.default.logeq(g),a.default.assign(y,e);var m=a.default.sum(a.default.muleq(g,y)),v=(0,n.default)(new Float64Array(t.size),t.shape),b=(0,n.default)(new Float64Array(i*i),[i,i]);a.default.sub(b,e,c),a.default.muleq(b,h);for(p=0;p<i;p++)for(var _=0;_<s;_++){var w=(0,n.default)(new Float64Array(t.shape[0]),[t.shape[0]]);a.default.assign(w,t.pick(null,_)),a.default.addseq(a.default.negeq(w),t.get(p,_)),a.default.muleq(w,b.pick(p,null)),v.set(p,_,a.default.sum(w))}var x=2*(r+1)/r;return a.default.mulseq(v,x),[m,v]};var n=s(r(0)),a=s(r(2)),i=s(r(1)),o=s(r(6));function s(t){return t&&t.__esModule?t:{default:t}}var u=Number.EPSILON||2.220446049250313e-16,l=(0,i.default)({args:["array"],body:function(t){t*=t}});t.exports=e.default},function(t,e,r){"use strict";r.r(e);var n=r(7),a=r.n(n),i=function(t,e){var r;function n(){var n,a,i=r.length,o=0,s=0;for(n=0;n<i;++n)o+=(a=r[n]).x,s+=a.y;for(o=o/i-t,s=s/i-e,n=0;n<i;++n)(a=r[n]).x-=o,a.y-=s}return null==t&&(t=0),null==e&&(e=0),n.initialize=function(t){r=t},n.x=function(e){return arguments.length?(t=+e,n):t},n.y=function(t){return arguments.length?(e=+t,n):e},n};function o(t,e,r,n){if(isNaN(e)||isNaN(r))return t;var a,i,o,s,u,l,c,h,f,p=t._root,d={data:n},g=t._x0,y=t._y0,m=t._x1,v=t._y1;if(!p)return t._root=d,t;for(;p.length;)if((l=e>=(i=(g+m)/2))?g=i:m=i,(c=r>=(o=(y+v)/2))?y=o:v=o,a=p,!(p=p[h=c<<1|l]))return a[h]=d,t;if(s=+t._x.call(null,p.data),u=+t._y.call(null,p.data),e===s&&r===u)return d.next=p,a?a[h]=d:t._root=d,t;do{a=a?a[h]=new Array(4):t._root=new Array(4),(l=e>=(i=(g+m)/2))?g=i:m=i,(c=r>=(o=(y+v)/2))?y=o:v=o}while((h=c<<1|l)==(f=(u>=o)<<1|s>=i));return a[f]=p,a[h]=d,t}var s=function(t,e,r,n,a){this.node=t,this.x0=e,this.y0=r,this.x1=n,this.y1=a};function u(t){return t[0]}function l(t){return t[1]}function c(t,e,r){var n=new h(null==e?u:e,null==r?l:r,NaN,NaN,NaN,NaN);return null==t?n:n.addAll(t)}function h(t,e,r,n,a,i){this._x=t,this._y=e,this._x0=r,this._y0=n,this._x1=a,this._y1=i,this._root=void 0}function f(t){for(var e={data:t.data},r=e;t=t.next;)r=r.next={data:t.data};return e}var p=c.prototype=h.prototype;p.copy=function(){var t,e,r=new h(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root;if(!n)return r;if(!n.length)return r._root=f(n),r;for(t=[{source:n,target:r._root=new Array(4)}];n=t.pop();)for(var a=0;a<4;++a)(e=n.source[a])&&(e.length?t.push({source:e,target:n.target[a]=new Array(4)}):n.target[a]=f(e));return r},p.add=function(t){var e=+this._x.call(null,t),r=+this._y.call(null,t);return o(this.cover(e,r),e,r,t)},p.addAll=function(t){var e,r,n,a,i=t.length,s=new Array(i),u=new Array(i),l=1/0,c=1/0,h=-1/0,f=-1/0;for(r=0;r<i;++r)isNaN(n=+this._x.call(null,e=t[r]))||isNaN(a=+this._y.call(null,e))||(s[r]=n,u[r]=a,n<l&&(l=n),n>h&&(h=n),a<c&&(c=a),a>f&&(f=a));if(l>h||c>f)return this;for(this.cover(l,c).cover(h,f),r=0;r<i;++r)o(this,s[r],u[r],t[r]);return this},p.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var r=this._x0,n=this._y0,a=this._x1,i=this._y1;if(isNaN(r))a=(r=Math.floor(t))+1,i=(n=Math.floor(e))+1;else{for(var o,s,u=a-r,l=this._root;r>t||t>=a||n>e||e>=i;)switch(s=(e<n)<<1|t<r,(o=new Array(4))[s]=l,l=o,u*=2,s){case 0:a=r+u,i=n+u;break;case 1:r=a-u,i=n+u;break;case 2:a=r+u,n=i-u;break;case 3:r=a-u,n=i-u}this._root&&this._root.length&&(this._root=l)}return this._x0=r,this._y0=n,this._x1=a,this._y1=i,this},p.data=function(){var t=[];return this.visit(function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)}),t},p.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},p.find=function(t,e,r){var n,a,i,o,u,l,c,h=this._x0,f=this._y0,p=this._x1,d=this._y1,g=[],y=this._root;for(y&&g.push(new s(y,h,f,p,d)),null==r?r=1/0:(h=t-r,f=e-r,p=t+r,d=e+r,r*=r);l=g.pop();)if(!(!(y=l.node)||(a=l.x0)>p||(i=l.y0)>d||(o=l.x1)<h||(u=l.y1)<f))if(y.length){var m=(a+o)/2,v=(i+u)/2;g.push(new s(y[3],m,v,o,u),new s(y[2],a,v,m,u),new s(y[1],m,i,o,v),new s(y[0],a,i,m,v)),(c=(e>=v)<<1|t>=m)&&(l=g[g.length-1],g[g.length-1]=g[g.length-1-c],g[g.length-1-c]=l)}else{var b=t-+this._x.call(null,y.data),_=e-+this._y.call(null,y.data),w=b*b+_*_;if(w<r){var x=Math.sqrt(r=w);h=t-x,f=e-x,p=t+x,d=e+x,n=y.data}}return n},p.remove=function(t){if(isNaN(i=+this._x.call(null,t))||isNaN(o=+this._y.call(null,t)))return this;var e,r,n,a,i,o,s,u,l,c,h,f,p=this._root,d=this._x0,g=this._y0,y=this._x1,m=this._y1;if(!p)return this;if(p.length)for(;;){if((l=i>=(s=(d+y)/2))?d=s:y=s,(c=o>=(u=(g+m)/2))?g=u:m=u,e=p,!(p=p[h=c<<1|l]))return this;if(!p.length)break;(e[h+1&3]||e[h+2&3]||e[h+3&3])&&(r=e,f=h)}for(;p.data!==t;)if(n=p,!(p=p.next))return this;return(a=p.next)&&delete p.next,n?(a?n.next=a:delete n.next,this):e?(a?e[h]=a:delete e[h],(p=e[0]||e[1]||e[2]||e[3])&&p===(e[3]||e[2]||e[1]||e[0])&&!p.length&&(r?r[f]=p:this._root=p),this):(this._root=a,this)},p.removeAll=function(t){for(var e=0,r=t.length;e<r;++e)this.remove(t[e]);return this},p.root=function(){return this._root},p.size=function(){var t=0;return this.visit(function(e){if(!e.length)do{++t}while(e=e.next)}),t},p.visit=function(t){var e,r,n,a,i,o,u=[],l=this._root;for(l&&u.push(new s(l,this._x0,this._y0,this._x1,this._y1));e=u.pop();)if(!t(l=e.node,n=e.x0,a=e.y0,i=e.x1,o=e.y1)&&l.length){var c=(n+i)/2,h=(a+o)/2;(r=l[3])&&u.push(new s(r,c,h,i,o)),(r=l[2])&&u.push(new s(r,n,h,c,o)),(r=l[1])&&u.push(new s(r,c,a,i,h)),(r=l[0])&&u.push(new s(r,n,a,c,h))}return this},p.visitAfter=function(t){var e,r=[],n=[];for(this._root&&r.push(new s(this._root,this._x0,this._y0,this._x1,this._y1));e=r.pop();){var a=e.node;if(a.length){var i,o=e.x0,u=e.y0,l=e.x1,c=e.y1,h=(o+l)/2,f=(u+c)/2;(i=a[0])&&r.push(new s(i,o,u,h,f)),(i=a[1])&&r.push(new s(i,h,u,l,f)),(i=a[2])&&r.push(new s(i,o,f,h,c)),(i=a[3])&&r.push(new s(i,h,f,l,c))}n.push(e)}for(;e=n.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},p.x=function(t){return arguments.length?(this._x=t,this):this._x},p.y=function(t){return arguments.length?(this._y=t,this):this._y};var d=function(t){return function(){return t}},g=function(){return 1e-6*(Math.random()-.5)};function y(t){return t.x+t.vx}function m(t){return t.y+t.vy}var v=function(t){var e,r,n=1,a=1;function i(){for(var t,i,s,u,l,h,f,p=e.length,d=0;d<a;++d)for(i=c(e,y,m).visitAfter(o),t=0;t<p;++t)s=e[t],h=r[s.index],f=h*h,u=s.x+s.vx,l=s.y+s.vy,i.visit(v);function v(t,e,r,a,i){var o=t.data,c=t.r,p=h+c;if(!o)return e>u+p||a<u-p||r>l+p||i<l-p;if(o.index>s.index){var d=u-o.x-o.vx,y=l-o.y-o.vy,m=d*d+y*y;m<p*p&&(0===d&&(m+=(d=g())*d),0===y&&(m+=(y=g())*y),m=(p-(m=Math.sqrt(m)))/m*n,s.vx+=(d*=m)*(p=(c*=c)/(f+c)),s.vy+=(y*=m)*p,o.vx-=d*(p=1-p),o.vy-=y*p)}}}function o(t){if(t.data)return t.r=r[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function s(){if(e){var n,a,i=e.length;for(r=new Array(i),n=0;n<i;++n)a=e[n],r[a.index]=+t(a,n,e)}}return"function"!=typeof t&&(t=d(null==t?1:+t)),i.initialize=function(t){e=t,s()},i.iterations=function(t){return arguments.length?(a=+t,i):a},i.strength=function(t){return arguments.length?(n=+t,i):n},i.radius=function(e){return arguments.length?(t="function"==typeof e?e:d(+e),s(),i):t},i};function b(t){return t.index}function _(t,e){var r=t.get(e);if(!r)throw new Error("missing: "+e);return r}var w=function(t){var e,r,n,a,i,o=b,s=function(t){return 1/Math.min(a[t.source.index],a[t.target.index])},u=d(30),l=1;function c(n){for(var a=0,o=t.length;a<l;++a)for(var s,u,c,h,f,p,d,y=0;y<o;++y)u=(s=t[y]).source,h=(c=s.target).x+c.vx-u.x-u.vx||g(),f=c.y+c.vy-u.y-u.vy||g(),h*=p=((p=Math.sqrt(h*h+f*f))-r[y])/p*n*e[y],f*=p,c.vx-=h*(d=i[y]),c.vy-=f*d,u.vx+=h*(d=1-d),u.vy+=f*d}function h(){if(n){var s,u,l=n.length,c=t.length,h=new Map(n.map((t,e)=>[o(t,e,n),t]));for(s=0,a=new Array(l);s<c;++s)(u=t[s]).index=s,"object"!=typeof u.source&&(u.source=_(h,u.source)),"object"!=typeof u.target&&(u.target=_(h,u.target)),a[u.source.index]=(a[u.source.index]||0)+1,a[u.target.index]=(a[u.target.index]||0)+1;for(s=0,i=new Array(c);s<c;++s)u=t[s],i[s]=a[u.source.index]/(a[u.source.index]+a[u.target.index]);e=new Array(c),f(),r=new Array(c),p()}}function f(){if(n)for(var r=0,a=t.length;r<a;++r)e[r]=+s(t[r],r,t)}function p(){if(n)for(var e=0,a=t.length;e<a;++e)r[e]=+u(t[e],e,t)}return null==t&&(t=[]),c.initialize=function(t){n=t,h()},c.links=function(e){return arguments.length?(t=e,h(),c):t},c.id=function(t){return arguments.length?(o=t,c):o},c.iterations=function(t){return arguments.length?(l=+t,c):l},c.strength=function(t){return arguments.length?(s="function"==typeof t?t:d(+t),f(),c):s},c.distance=function(t){return arguments.length?(u="function"==typeof t?t:d(+t),p(),c):u},c},x={value:function(){}};function k(){for(var t,e=0,r=arguments.length,n={};e<r;++e){if(!(t=arguments[e]+"")||t in n)throw new Error("illegal type: "+t);n[t]=[]}return new S(n)}function S(t){this._=t}function E(t,e){for(var r,n=0,a=t.length;n<a;++n)if((r=t[n]).name===e)return r.value}function A(t,e,r){for(var n=0,a=t.length;n<a;++n)if(t[n].name===e){t[n]=x,t=t.slice(0,n).concat(t.slice(n+1));break}return null!=r&&t.push({name:e,value:r}),t}S.prototype=k.prototype={constructor:S,on:function(t,e){var r,n=this._,a=function(t,e){return t.trim().split(/^|\s+/).map(function(t){var r="",n=t.indexOf(".");if(n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:r}})}(t+"",n),i=-1,o=a.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++i<o;)if(r=(t=a[i]).type)n[r]=A(n[r],t.name,e);else if(null==e)for(r in n)n[r]=A(n[r],t.name,null);return this}for(;++i<o;)if((r=(t=a[i]).type)&&(r=E(n[r],t.name)))return r},copy:function(){var t={},e=this._;for(var r in e)t[r]=e[r].slice();return new S(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var r,n,a=new Array(r),i=0;i<r;++i)a[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=0,r=(n=this._[t]).length;i<r;++i)n[i].value.apply(e,a)},apply:function(t,e,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],a=0,i=n.length;a<i;++a)n[a].value.apply(e,r)}};var M,C,N=k,j=0,I=0,F=0,L=1e3,V=0,P=0,O=0,T="object"==typeof performance&&performance.now?performance:Date,q="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function R(){return P||(q(D),P=T.now()+O)}function D(){P=0}function U(){this._call=this._time=this._next=null}function B(t,e,r){var n=new U;return n.restart(t,e,r),n}function z(){P=(V=T.now())+O,j=I=0;try{!function(){R(),++j;for(var t,e=M;e;)(t=P-e._time)>=0&&e._call.call(null,t),e=e._next;--j}()}finally{j=0,function(){var t,e,r=M,n=1/0;for(;r;)r._call?(n>r._time&&(n=r._time),t=r,r=r._next):(e=r._next,r._next=null,r=t?t._next=e:M=e);C=t,X(n)}(),P=0}}function W(){var t=T.now(),e=t-V;e>L&&(O-=e,V=t)}function X(t){j||(I&&(I=clearTimeout(I)),t-P>24?(t<1/0&&(I=setTimeout(z,t-T.now()-O)),F&&(F=clearInterval(F))):(F||(V=T.now(),F=setInterval(W,L)),j=1,q(z)))}U.prototype=B.prototype={constructor:U,restart:function(t,e,r){if("function"!=typeof t)throw new TypeError("callback is not a function");r=(null==r?R():+r)+(null==e?0:+e),this._next||C===this||(C?C._next=this:M=this,C=this),this._call=t,this._time=r,X()},stop:function(){this._call&&(this._call=null,this._time=1/0,X())}};function H(t){return t.x}function G(t){return t.y}var Y=10,$=Math.PI*(3-Math.sqrt(5)),K=function(t){var e,r=1,n=.001,a=1-Math.pow(n,1/300),i=0,o=.6,s=new Map,u=B(c),l=N("tick","end");function c(){h(),l.call("tick",e),r<n&&(u.stop(),l.call("end",e))}function h(n){var u,l,c=t.length;void 0===n&&(n=1);for(var h=0;h<n;++h)for(r+=(i-r)*a,s.forEach(function(t){t(r)}),u=0;u<c;++u)null==(l=t[u]).fx?l.x+=l.vx*=o:(l.x=l.fx,l.vx=0),null==l.fy?l.y+=l.vy*=o:(l.y=l.fy,l.vy=0);return e}function f(){for(var e,r=0,n=t.length;r<n;++r){if((e=t[r]).index=r,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var a=Y*Math.sqrt(r),i=r*$;e.x=a*Math.cos(i),e.y=a*Math.sin(i)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function p(e){return e.initialize&&e.initialize(t),e}return null==t&&(t=[]),f(),e={tick:h,restart:function(){return u.restart(c),e},stop:function(){return u.stop(),e},nodes:function(r){return arguments.length?(t=r,f(),s.forEach(p),e):t},alpha:function(t){return arguments.length?(r=+t,e):r},alphaMin:function(t){return arguments.length?(n=+t,e):n},alphaDecay:function(t){return arguments.length?(a=+t,e):+a},alphaTarget:function(t){return arguments.length?(i=+t,e):i},velocityDecay:function(t){return arguments.length?(o=1-t,e):1-o},force:function(t,r){return arguments.length>1?(null==r?s.delete(t):s.set(t,p(r)),e):s.get(t)},find:function(e,r,n){var a,i,o,s,u,l=0,c=t.length;for(null==n?n=1/0:n*=n,l=0;l<c;++l)(o=(a=e-(s=t[l]).x)*a+(i=r-s.y)*i)<n&&(u=s,n=o);return u},on:function(t,r){return arguments.length>1?(l.on(t,r),e):l.on(t)}}},Z=function(){var t,e,r,n,a=d(-30),i=1,o=1/0,s=.81;function u(n){var a,i=t.length,o=c(t,H,G).visitAfter(h);for(r=n,a=0;a<i;++a)e=t[a],o.visit(f)}function l(){if(t){var e,r,i=t.length;for(n=new Array(i),e=0;e<i;++e)r=t[e],n[r.index]=+a(r,e,t)}}function h(t){var e,r,a,i,o,s=0,u=0;if(t.length){for(a=i=o=0;o<4;++o)(e=t[o])&&(r=Math.abs(e.value))&&(s+=e.value,u+=r,a+=r*e.x,i+=r*e.y);t.x=a/u,t.y=i/u}else{(e=t).x=e.data.x,e.y=e.data.y;do{s+=n[e.data.index]}while(e=e.next)}t.value=s}function f(t,a,u,l){if(!t.value)return!0;var c=t.x-e.x,h=t.y-e.y,f=l-a,p=c*c+h*h;if(f*f/s<p)return p<o&&(0===c&&(p+=(c=g())*c),0===h&&(p+=(h=g())*h),p<i&&(p=Math.sqrt(i*p)),e.vx+=c*t.value*r/p,e.vy+=h*t.value*r/p),!0;if(!(t.length||p>=o)){(t.data!==e||t.next)&&(0===c&&(p+=(c=g())*c),0===h&&(p+=(h=g())*h),p<i&&(p=Math.sqrt(i*p)));do{t.data!==e&&(f=n[t.data.index]*r/p,e.vx+=c*f,e.vy+=h*f)}while(t=t.next)}}return u.initialize=function(e){t=e,l()},u.strength=function(t){return arguments.length?(a="function"==typeof t?t:d(+t),l(),u):a},u.distanceMin=function(t){return arguments.length?(i=t*t,u):Math.sqrt(i)},u.distanceMax=function(t){return arguments.length?(o=t*t,u):Math.sqrt(o)},u.theta=function(t){return arguments.length?(s=t*t,u):Math.sqrt(s)},u},J=Math.sqrt(50),Q=Math.sqrt(10),tt=Math.sqrt(2),et=function(t,e,r){var n,a,i,o,s=-1;if(r=+r,(t=+t)===(e=+e)&&r>0)return[t];if((n=e<t)&&(a=t,t=e,e=a),0===(o=rt(t,e,r))||!isFinite(o))return[];if(o>0)for(t=Math.ceil(t/o),e=Math.floor(e/o),i=new Array(a=Math.ceil(e-t+1));++s<a;)i[s]=(t+s)*o;else for(t=Math.floor(t*o),e=Math.ceil(e*o),i=new Array(a=Math.ceil(t-e+1));++s<a;)i[s]=(t-s)/o;return n&&i.reverse(),i};function rt(t,e,r){var n=(e-t)/Math.max(0,r),a=Math.floor(Math.log(n)/Math.LN10),i=n/Math.pow(10,a);return a>=0?(i>=J?10:i>=Q?5:i>=tt?2:1)*Math.pow(10,a):-Math.pow(10,-a)/(i>=J?10:i>=Q?5:i>=tt?2:1)}var nt=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN};var at=function(t){return 1===t.length&&(t=function(t){return function(e,r){return nt(t(e),r)}}(t)),{left:function(e,r,n,a){for(null==n&&(n=0),null==a&&(a=e.length);n<a;){var i=n+a>>>1;t(e[i],r)<0?n=i+1:a=i}return n},right:function(e,r,n,a){for(null==n&&(n=0),null==a&&(a=e.length);n<a;){var i=n+a>>>1;t(e[i],r)>0?a=i:n=i+1}return n}}}(nt),it=at.right,ot=(at.left,it),st=function(t,e,r){t.prototype=e.prototype=r,r.constructor=t};function ut(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function lt(){}var ct="\\s*([+-]?\\d+)\\s*",ht="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",ft="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",pt=/^#([0-9a-f]{3})$/,dt=/^#([0-9a-f]{6})$/,gt=new RegExp("^rgb\\("+[ct,ct,ct]+"\\)$"),yt=new RegExp("^rgb\\("+[ft,ft,ft]+"\\)$"),mt=new RegExp("^rgba\\("+[ct,ct,ct,ht]+"\\)$"),vt=new RegExp("^rgba\\("+[ft,ft,ft,ht]+"\\)$"),bt=new RegExp("^hsl\\("+[ht,ft,ft]+"\\)$"),_t=new RegExp("^hsla\\("+[ht,ft,ft,ht]+"\\)$"),wt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function xt(t){var e;return t=(t+"").trim().toLowerCase(),(e=pt.exec(t))?new Mt((e=parseInt(e[1],16))>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):(e=dt.exec(t))?kt(parseInt(e[1],16)):(e=gt.exec(t))?new Mt(e[1],e[2],e[3],1):(e=yt.exec(t))?new Mt(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=mt.exec(t))?St(e[1],e[2],e[3],e[4]):(e=vt.exec(t))?St(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=bt.exec(t))?Nt(e[1],e[2]/100,e[3]/100,1):(e=_t.exec(t))?Nt(e[1],e[2]/100,e[3]/100,e[4]):wt.hasOwnProperty(t)?kt(wt[t]):"transparent"===t?new Mt(NaN,NaN,NaN,0):null}function kt(t){return new Mt(t>>16&255,t>>8&255,255&t,1)}function St(t,e,r,n){return n<=0&&(t=e=r=NaN),new Mt(t,e,r,n)}function Et(t){return t instanceof lt||(t=xt(t)),t?new Mt((t=t.rgb()).r,t.g,t.b,t.opacity):new Mt}function At(t,e,r,n){return 1===arguments.length?Et(t):new Mt(t,e,r,null==n?1:n)}function Mt(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}function Ct(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Nt(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new It(t,e,r,n)}function jt(t,e,r,n){return 1===arguments.length?function(t){if(t instanceof It)return new It(t.h,t.s,t.l,t.opacity);if(t instanceof lt||(t=xt(t)),!t)return new It;if(t instanceof It)return t;var e=(t=t.rgb()).r/255,r=t.g/255,n=t.b/255,a=Math.min(e,r,n),i=Math.max(e,r,n),o=NaN,s=i-a,u=(i+a)/2;return s?(o=e===i?(r-n)/s+6*(r<n):r===i?(n-e)/s+2:(e-r)/s+4,s/=u<.5?i+a:2-i-a,o*=60):s=u>0&&u<1?0:o,new It(o,s,u,t.opacity)}(t):new It(t,e,r,null==n?1:n)}function It(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}function Ft(t,e,r){return 255*(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)}st(lt,xt,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}}),st(Mt,At,ut(lt,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Mt(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Mt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},hex:function(){return"#"+Ct(this.r)+Ct(this.g)+Ct(this.b)},toString:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),st(It,jt,ut(lt,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new It(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new It(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,a=2*r-n;return new Mt(Ft(t>=240?t-240:t+120,a,n),Ft(t,a,n),Ft(t<120?t+240:t-120,a,n),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var Lt=Math.PI/180,Vt=180/Math.PI,Pt=.96422,Ot=1,Tt=.82521,qt=4/29,Rt=6/29,Dt=3*Rt*Rt,Ut=Rt*Rt*Rt;function Bt(t){if(t instanceof Wt)return new Wt(t.l,t.a,t.b,t.opacity);if(t instanceof Zt){if(isNaN(t.h))return new Wt(t.l,0,0,t.opacity);var e=t.h*Lt;return new Wt(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}t instanceof Mt||(t=Et(t));var r,n,a=Yt(t.r),i=Yt(t.g),o=Yt(t.b),s=Xt((.2225045*a+.7168786*i+.0606169*o)/Ot);return a===i&&i===o?r=n=s:(r=Xt((.4360747*a+.3850649*i+.1430804*o)/Pt),n=Xt((.0139322*a+.0971045*i+.7141733*o)/Tt)),new Wt(116*s-16,500*(r-s),200*(s-n),t.opacity)}function zt(t,e,r,n){return 1===arguments.length?Bt(t):new Wt(t,e,r,null==n?1:n)}function Wt(t,e,r,n){this.l=+t,this.a=+e,this.b=+r,this.opacity=+n}function Xt(t){return t>Ut?Math.pow(t,1/3):t/Dt+qt}function Ht(t){return t>Rt?t*t*t:Dt*(t-qt)}function Gt(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Yt(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function $t(t){if(t instanceof Zt)return new Zt(t.h,t.c,t.l,t.opacity);if(t instanceof Wt||(t=Bt(t)),0===t.a&&0===t.b)return new Zt(NaN,0,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*Vt;return new Zt(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Kt(t,e,r,n){return 1===arguments.length?$t(t):new Zt(t,e,r,null==n?1:n)}function Zt(t,e,r,n){this.h=+t,this.c=+e,this.l=+r,this.opacity=+n}st(Wt,zt,ut(lt,{brighter:function(t){return new Wt(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new Wt(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,r=isNaN(this.b)?t:t-this.b/200;return new Mt(Gt(3.1338561*(e=Pt*Ht(e))-1.6168667*(t=Ot*Ht(t))-.4906146*(r=Tt*Ht(r))),Gt(-.9787684*e+1.9161415*t+.033454*r),Gt(.0719453*e-.2289914*t+1.4052427*r),this.opacity)}})),st(Zt,Kt,ut(lt,{brighter:function(t){return new Zt(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new Zt(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return Bt(this).rgb()}}));var Jt=-.14861,Qt=1.78277,te=-.29227,ee=-.90649,re=1.97294,ne=re*ee,ae=re*Qt,ie=Qt*te-ee*Jt;function oe(t,e,r,n){return 1===arguments.length?function(t){if(t instanceof se)return new se(t.h,t.s,t.l,t.opacity);t instanceof Mt||(t=Et(t));var e=t.r/255,r=t.g/255,n=t.b/255,a=(ie*n+ne*e-ae*r)/(ie+ne-ae),i=n-a,o=(re*(r-a)-te*i)/ee,s=Math.sqrt(o*o+i*i)/(re*a*(1-a)),u=s?Math.atan2(o,i)*Vt-120:NaN;return new se(u<0?u+360:u,s,a,t.opacity)}(t):new se(t,e,r,null==n?1:n)}function se(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}function ue(t,e,r,n,a){var i=t*t,o=i*t;return((1-3*t+3*i-o)*e+(4-6*i+3*o)*r+(1+3*t+3*i-3*o)*n+o*a)/6}st(se,oe,ut(lt,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new se(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new se(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*Lt,e=+this.l,r=isNaN(this.s)?0:this.s*e*(1-e),n=Math.cos(t),a=Math.sin(t);return new Mt(255*(e+r*(Jt*n+Qt*a)),255*(e+r*(te*n+ee*a)),255*(e+r*(re*n)),this.opacity)}}));var le=function(t){return function(){return t}};function ce(t,e){return function(r){return t+r*e}}function he(t,e){var r=e-t;return r?ce(t,r>180||r<-180?r-360*Math.round(r/360):r):le(isNaN(t)?e:t)}function fe(t){return 1==(t=+t)?pe:function(e,r){return r-e?function(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}(e,r,t):le(isNaN(e)?r:e)}}function pe(t,e){var r=e-t;return r?ce(t,r):le(isNaN(t)?e:t)}var de=function t(e){var r=fe(e);function n(t,e){var n=r((t=At(t)).r,(e=At(e)).r),a=r(t.g,e.g),i=r(t.b,e.b),o=pe(t.opacity,e.opacity);return function(e){return t.r=n(e),t.g=a(e),t.b=i(e),t.opacity=o(e),t+""}}return n.gamma=t,n}(1);function ge(t){return function(e){var r,n,a=e.length,i=new Array(a),o=new Array(a),s=new Array(a);for(r=0;r<a;++r)n=At(e[r]),i[r]=n.r||0,o[r]=n.g||0,s[r]=n.b||0;return i=t(i),o=t(o),s=t(s),n.opacity=1,function(t){return n.r=i(t),n.g=o(t),n.b=s(t),n+""}}}ge(function(t){var e=t.length-1;return function(r){var n=r<=0?r=0:r>=1?(r=1,e-1):Math.floor(r*e),a=t[n],i=t[n+1],o=n>0?t[n-1]:2*a-i,s=n<e-1?t[n+2]:2*i-a;return ue((r-n/e)*e,o,a,i,s)}}),ge(function(t){var e=t.length;return function(r){var n=Math.floor(((r%=1)<0?++r:r)*e),a=t[(n+e-1)%e],i=t[n%e],o=t[(n+1)%e],s=t[(n+2)%e];return ue((r-n/e)*e,a,i,o,s)}});var ye=function(t,e){return e-=t=+t,function(r){return t+e*r}},me=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ve=new RegExp(me.source,"g");var be,_e,we,xe,ke=function(t,e){var r,n=typeof e;return null==e||"boolean"===n?le(e):("number"===n?ye:"string"===n?(r=xt(e))?(e=r,de):function(t,e){var r,n,a,i=me.lastIndex=ve.lastIndex=0,o=-1,s=[],u=[];for(t+="",e+="";(r=me.exec(t))&&(n=ve.exec(e));)(a=n.index)>i&&(a=e.slice(i,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(n=n[0])?s[o]?s[o]+=n:s[++o]=n:(s[++o]=null,u.push({i:o,x:ye(r,n)})),i=ve.lastIndex;return i<e.length&&(a=e.slice(i),s[o]?s[o]+=a:s[++o]=a),s.length<2?u[0]?function(t){return function(e){return t(e)+""}}(u[0].x):function(t){return function(){return t}}(e):(e=u.length,function(t){for(var r,n=0;n<e;++n)s[(r=u[n]).i]=r.x(t);return s.join("")})}:e instanceof xt?de:e instanceof Date?function(t,e){var r=new Date;return e-=t=+t,function(n){return r.setTime(t+e*n),r}}:Array.isArray(e)?function(t,e){var r,n=e?e.length:0,a=t?Math.min(n,t.length):0,i=new Array(a),o=new Array(n);for(r=0;r<a;++r)i[r]=ke(t[r],e[r]);for(;r<n;++r)o[r]=e[r];return function(t){for(r=0;r<a;++r)o[r]=i[r](t);return o}}:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?function(t,e){var r,n={},a={};for(r in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)r in t?n[r]=ke(t[r],e[r]):a[r]=e[r];return function(t){for(r in n)a[r]=n[r](t);return a}}:ye)(t,e)},Se=function(t,e){return e-=t=+t,function(r){return Math.round(t+e*r)}},Ee=180/Math.PI,Ae={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},Me=function(t,e,r,n,a,i){var o,s,u;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(u=t*r+e*n)&&(r-=t*u,n-=e*u),(s=Math.sqrt(r*r+n*n))&&(r/=s,n/=s,u/=s),t*n<e*r&&(t=-t,e=-e,u=-u,o=-o),{translateX:a,translateY:i,rotate:Math.atan2(e,t)*Ee,skewX:Math.atan(u)*Ee,scaleX:o,scaleY:s}};function Ce(t,e,r,n){function a(t){return t.length?t.pop()+" ":""}return function(i,o){var s=[],u=[];return i=t(i),o=t(o),function(t,n,a,i,o,s){if(t!==a||n!==i){var u=o.push("translate(",null,e,null,r);s.push({i:u-4,x:ye(t,a)},{i:u-2,x:ye(n,i)})}else(a||i)&&o.push("translate("+a+e+i+r)}(i.translateX,i.translateY,o.translateX,o.translateY,s,u),function(t,e,r,i){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),i.push({i:r.push(a(r)+"rotate(",null,n)-2,x:ye(t,e)})):e&&r.push(a(r)+"rotate("+e+n)}(i.rotate,o.rotate,s,u),function(t,e,r,i){t!==e?i.push({i:r.push(a(r)+"skewX(",null,n)-2,x:ye(t,e)}):e&&r.push(a(r)+"skewX("+e+n)}(i.skewX,o.skewX,s,u),function(t,e,r,n,i,o){if(t!==r||e!==n){var s=i.push(a(i)+"scale(",null,",",null,")");o.push({i:s-4,x:ye(t,r)},{i:s-2,x:ye(e,n)})}else 1===r&&1===n||i.push(a(i)+"scale("+r+","+n+")")}(i.scaleX,i.scaleY,o.scaleX,o.scaleY,s,u),i=o=null,function(t){for(var e,r=-1,n=u.length;++r<n;)s[(e=u[r]).i]=e.x(t);return s.join("")}}}Ce(function(t){return"none"===t?Ae:(be||(be=document.createElement("DIV"),_e=document.documentElement,we=document.defaultView),be.style.transform=t,t=we.getComputedStyle(_e.appendChild(be),null).getPropertyValue("transform"),_e.removeChild(be),t=t.slice(7,-1).split(","),Me(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))},"px, ","px)","deg)"),Ce(function(t){return null==t?Ae:(xe||(xe=document.createElementNS("http://www.w3.org/2000/svg","g")),xe.setAttribute("transform",t),(t=xe.transform.baseVal.consolidate())?(t=t.matrix,Me(t.a,t.b,t.c,t.d,t.e,t.f)):Ae)},", ",")",")"),Math.SQRT2;function Ne(t){return function(e,r){var n=t((e=jt(e)).h,(r=jt(r)).h),a=pe(e.s,r.s),i=pe(e.l,r.l),o=pe(e.opacity,r.opacity);return function(t){return e.h=n(t),e.s=a(t),e.l=i(t),e.opacity=o(t),e+""}}}Ne(he),Ne(pe);function je(t){return function(e,r){var n=t((e=Kt(e)).h,(r=Kt(r)).h),a=pe(e.c,r.c),i=pe(e.l,r.l),o=pe(e.opacity,r.opacity);return function(t){return e.h=n(t),e.c=a(t),e.l=i(t),e.opacity=o(t),e+""}}}je(he),je(pe);function Ie(t){return function e(r){function n(e,n){var a=t((e=oe(e)).h,(n=oe(n)).h),i=pe(e.s,n.s),o=pe(e.l,n.l),s=pe(e.opacity,n.opacity);return function(t){return e.h=a(t),e.s=i(t),e.l=o(Math.pow(t,r)),e.opacity=s(t),e+""}}return r=+r,n.gamma=e,n}(1)}Ie(he),Ie(pe);var Fe=function(t){return function(){return t}},Le=function(t){return+t},Ve=[0,1];function Pe(t){return t}function Oe(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:Fe(isNaN(e)?NaN:.5)}function Te(t,e,r){var n=t[0],a=t[1],i=e[0],o=e[1];return a<n?(n=Oe(a,n),i=r(o,i)):(n=Oe(n,a),i=r(i,o)),function(t){return i(n(t))}}function qe(t,e,r){var n=Math.min(t.length,e.length)-1,a=new Array(n),i=new Array(n),o=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<n;)a[o]=Oe(t[o],t[o+1]),i[o]=r(e[o],e[o+1]);return function(e){var r=ot(t,e,1,n)-1;return i[r](a[r](e))}}function Re(){var t,e,r,n,a,i,o=Ve,s=Ve,u=ke,l=Pe;function c(){var t=Math.min(o.length,s.length);return l!==Pe&&(l=function(t,e){var r;return t>e&&(r=t,t=e,e=r),function(r){return Math.max(t,Math.min(e,r))}}(o[0],o[t-1])),n=t>2?qe:Te,a=i=null,h}function h(e){return isNaN(e=+e)?r:(a||(a=n(o.map(t),s,u)))(t(l(e)))}return h.invert=function(r){return l(e((i||(i=n(s,o.map(t),ye)))(r)))},h.domain=function(t){return arguments.length?(o=Array.from(t,Le),c()):o.slice()},h.range=function(t){return arguments.length?(s=Array.from(t),c()):s.slice()},h.rangeRound=function(t){return s=Array.from(t),u=Se,c()},h.clamp=function(t){return arguments.length?(l=!!t||Pe,c()):l!==Pe},h.interpolate=function(t){return arguments.length?(u=t,c()):u},h.unknown=function(t){return arguments.length?(r=t,h):r},function(r,n){return t=r,e=n,c()}}var De=function(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]},Ue=function(t){return(t=De(Math.abs(t)))?t[1]:NaN},Be=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ze(t){return new We(t)}function We(t){if(!(e=Be.exec(t)))throw new Error("invalid format: "+t);var e;this.fill=e[1]||" ",this.align=e[2]||">",this.sign=e[3]||"-",this.symbol=e[4]||"",this.zero=!!e[5],this.width=e[6]&&+e[6],this.comma=!!e[7],this.precision=e[8]&&+e[8].slice(1),this.trim=!!e[9],this.type=e[10]||""}ze.prototype=We.prototype,We.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Xe,He,Ge,Ye,$e=function(t){t:for(var e,r=t.length,n=1,a=-1;n<r;++n)switch(t[n]){case".":a=e=n;break;case"0":0===a&&(a=n),e=n;break;default:if(a>0){if(!+t[n])break t;a=0}}return a>0?t.slice(0,a)+t.slice(e+1):t},Ke=function(t,e){var r=De(t,e);if(!r)return t+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")},Ze={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Ke(100*t,e)},r:Ke,s:function(t,e){var r=De(t,e);if(!r)return t+"";var n=r[0],a=r[1],i=a-(Xe=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+De(t,Math.max(0,e+i-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},Je=function(t){return t},Qe=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"],tr=function(t){var e=t.grouping&&t.thousands?function(t,e){return function(r,n){for(var a=r.length,i=[],o=0,s=t[0],u=0;a>0&&s>0&&(u+s+1>n&&(s=Math.max(1,n-u)),i.push(r.substring(a-=s,a+s)),!((u+=s+1)>n));)s=t[o=(o+1)%t.length];return i.reverse().join(e)}}(t.grouping,t.thousands):Je,r=t.currency,n=t.decimal,a=t.numerals?function(t){return function(e){return e.replace(/[0-9]/g,function(e){return t[+e]})}}(t.numerals):Je,i=t.percent||"%";function o(t){var o=(t=ze(t)).fill,s=t.align,u=t.sign,l=t.symbol,c=t.zero,h=t.width,f=t.comma,p=t.precision,d=t.trim,g=t.type;"n"===g?(f=!0,g="g"):Ze[g]||(null==p&&(p=12),d=!0,g="g"),(c||"0"===o&&"="===s)&&(c=!0,o="0",s="=");var y="$"===l?r[0]:"#"===l&&/[boxX]/.test(g)?"0"+g.toLowerCase():"",m="$"===l?r[1]:/[%p]/.test(g)?i:"",v=Ze[g],b=/[defgprs%]/.test(g);function _(t){var r,i,l,_=y,w=m;if("c"===g)w=v(t)+w,t="";else{var x=(t=+t)<0;if(t=v(Math.abs(t),p),d&&(t=$e(t)),x&&0==+t&&(x=!1),_=(x?"("===u?u:"-":"-"===u||"("===u?"":u)+_,w=("s"===g?Qe[8+Xe/3]:"")+w+(x&&"("===u?")":""),b)for(r=-1,i=t.length;++r<i;)if(48>(l=t.charCodeAt(r))||l>57){w=(46===l?n+t.slice(r+1):t.slice(r))+w,t=t.slice(0,r);break}}f&&!c&&(t=e(t,1/0));var k=_.length+t.length+w.length,S=k<h?new Array(h-k+1).join(o):"";switch(f&&c&&(t=e(S+t,S.length?h-w.length:1/0),S=""),s){case"<":t=_+t+w+S;break;case"=":t=_+S+t+w;break;case"^":t=S.slice(0,k=S.length>>1)+_+t+w+S.slice(k);break;default:t=S+_+t+w}return a(t)}return p=null==p?6:/[gprs]/.test(g)?Math.max(1,Math.min(21,p)):Math.max(0,Math.min(20,p)),_.toString=function(){return t+""},_}return{format:o,formatPrefix:function(t,e){var r=o(((t=ze(t)).type="f",t)),n=3*Math.max(-8,Math.min(8,Math.floor(Ue(e)/3))),a=Math.pow(10,-n),i=Qe[8+n/3];return function(t){return r(a*t)+i}}}};!function(t){He=tr(t),Ge=He.format,Ye=He.formatPrefix}({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var er=function(t,e,r,n){var a,i=function(t,e,r){var n=Math.abs(e-t)/Math.max(0,r),a=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)),i=n/a;return i>=J?a*=10:i>=Q?a*=5:i>=tt&&(a*=2),e<t?-a:a}(t,e,r);switch((n=ze(null==n?",f":n)).type){case"s":var o=Math.max(Math.abs(t),Math.abs(e));return null!=n.precision||isNaN(a=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Ue(e)/3)))-Ue(Math.abs(t)))}(i,o))||(n.precision=a),Ye(n,o);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(a=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Ue(e)-Ue(t))+1}(i,Math.max(Math.abs(t),Math.abs(e))))||(n.precision=a-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(a=function(t){return Math.max(0,-Ue(Math.abs(t)))}(i))||(n.precision=a-2*("%"===n.type))}return Ge(n)};function rr(){var t=Re()(Pe,Pe);return t.copy=function(){return function(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}(t,rr())},function(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}.apply(t,arguments),function(t){var e=t.domain;return t.ticks=function(t){var r=e();return et(r[0],r[r.length-1],null==t?10:t)},t.tickFormat=function(t,r){var n=e();return er(n[0],n[n.length-1],null==t?10:t,r)},t.nice=function(r){null==r&&(r=10);var n,a=e(),i=0,o=a.length-1,s=a[i],u=a[o];return u<s&&(n=s,s=u,u=n,n=i,i=o,o=n),(n=rt(s,u,r))>0?n=rt(s=Math.floor(s/n)*n,u=Math.ceil(u/n)*n,r):n<0&&(n=rt(s=Math.ceil(s*n)/n,u=Math.floor(u*n)/n,r)),n>0?(a[i]=Math.floor(s/n)*n,a[o]=Math.ceil(u/n)*n,e(a)):n<0&&(a[i]=Math.ceil(s*n)/n,a[o]=Math.floor(u*n)/n,e(a)),t},t}(t)}Object.assign;const nr=[{label:"Romantic",tag:"(Rom)",color:"#62ACFF"},{label:"Classical",tag:"(Clas)",color:"#00B318"},{label:"Empirical",tag:"(Emp)",color:"#FFFF03"},{label:"Inductive",tag:"(Induc)",color:"#BA00B4"},{label:"Deductive",tag:"(Deduc)",color:"#80FF00"},{label:"Rational/Speculative",tag:"(Ratio)",color:"#FFA2E1"},{label:"Analogical",tag:"(Anlg)",color:"#FF0011"},{label:"Methodological",tag:"(Method)",color:"#A9FFD2"},{label:"Historical/Descriptive",tag:"(Hist)",color:"#1100FF"},{label:"Philosophical definition",tag:"(Phil)",color:"#CC99FF"},{label:"Metaphorical/Visual",tag:"(Metaph)",color:"#FFAE5C"},{label:"Metaphors attributing agency to nature",tag:"(Agncy)",color:"#9F5103"},{label:"Future/Utility",tag:"(Fut)",color:"#FF007F"},{label:"Classificatory",tag:"(Clsf)",color:"#666600"},{label:"Numerical",tag:"(Num)",color:"#000000"},{label:"Writing aim/direction",tag:"(Wr)",color:"#808080"},{label:"Blank statement",tag:"(Bl)",color:"#FFFFFF"}].map((t,e)=>t),ar=(nr.reduce((t,{color:e,oldColor:r})=>(t[r]=e,t),{}),Object.entries({Romantic:"#62ACFF",Classical:"#00B318",Empirical:"#FFFF03",Inductive:"#BA00B4",Deductive:"#80FF00","Rational/Speculative":"#FFA2E1","Rational, Speculative":"#FFA2E1","Rational-Speculative":"#FFA2E1",Analogical:"#FF0011",Methodological:"#A9FFD2","Historical/Descriptive":"#1100FF","Historical, Descriptive":"#1100FF","Historical, descriptive":"#1100FF",Historical:"#1100FF","Philosophical, epistemological":"#CC99FF","Philosophical definition":"#CC99FF",Philosophical:"#CC99FF","Metaphorical/Visual":"#FFAE5C","metaphorical, visual":"#FFAE5C",Metaphorical:"#FFAE5C","Metaphorical-Agency to nature":"#9F5103","Metaphors attributing agency to nature":"#9F5103","agency to nature":"#9F5103","Future/Utility":"#FF007F","Future, Utility":"#FF007F","Future-Utility":"#FF007F","Classificatory/definition":"#666600","Classificatory definition":"#666600",Classificatory:"#666600",Numerical:"#000000","Writing aim/direction":"#808080","Writing aim, direction":"#808080","Writing direction":"#808080","Blank statement":"#FFFFFF",Blank:"#FFFFFF"}).reduce((t,[e,r])=>(t[e.toLowerCase()]=r,t),{}),[{cat:"Empirical",superCat:"Descriptive"},{cat:"Historical",superCat:"Descriptive"},{cat:"Classificatory",superCat:"Descriptive"},{cat:"Numerical",superCat:"Descriptive"},{cat:"Philosophical",superCat:"Characterizing"},{cat:"Methodological",superCat:"Characterizing"},{cat:"Classical",superCat:"Characterizing"},{cat:"Romantic",superCat:"Characterizing"},{cat:"Rational-Speculative",superCat:"Logical"},{cat:"Inductive",superCat:"Logical"},{cat:"Deductive",superCat:"Logical"},{cat:"Analogical",superCat:"Logical"},{cat:"Metaphorical",superCat:"Decorative"},{cat:"Metaphorical-Agency to nature",superCat:"Decorative"},{cat:"Future-Utility",superCat:"Persuasive"},{cat:"Writing direction",superCat:"Persuasive"},{cat:"Blank",superCat:"NA"}].map(t=>({cat:t.cat,superCat:""})),600),ir=450,or={top:30,bottom:30,left:30,right:30};var sr={},ur={},lr=34,cr=10,hr=13;function fr(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}")}function pr(t){var e=Object.create(null),r=[];return t.forEach(function(t){for(var n in t)n in e||r.push(e[n]=n)}),r}function dr(t,e){var r=t+"",n=r.length;return n<e?new Array(e-n+1).join(0)+r:r}function gr(t){var e=t.getUTCHours(),r=t.getUTCMinutes(),n=t.getUTCSeconds(),a=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":function(t){return t<0?"-"+dr(-t,6):t>9999?"+"+dr(t,6):dr(t,4)}(t.getUTCFullYear())+"-"+dr(t.getUTCMonth()+1,2)+"-"+dr(t.getUTCDate(),2)+(a?"T"+dr(e,2)+":"+dr(r,2)+":"+dr(n,2)+"."+dr(a,3)+"Z":n?"T"+dr(e,2)+":"+dr(r,2)+":"+dr(n,2)+"Z":r||e?"T"+dr(e,2)+":"+dr(r,2)+"Z":"")}var yr=function(t){var e=new RegExp('["'+t+"\n\r]"),r=t.charCodeAt(0);function n(t,e){var n,a=[],i=t.length,o=0,s=0,u=i<=0,l=!1;function c(){if(u)return ur;if(l)return l=!1,sr;var e,n,a=o;if(t.charCodeAt(a)===lr){for(;o++<i&&t.charCodeAt(o)!==lr||t.charCodeAt(++o)===lr;);return(e=o)>=i?u=!0:(n=t.charCodeAt(o++))===cr?l=!0:n===hr&&(l=!0,t.charCodeAt(o)===cr&&++o),t.slice(a+1,e-1).replace(/""/g,'"')}for(;o<i;){if((n=t.charCodeAt(e=o++))===cr)l=!0;else if(n===hr)l=!0,t.charCodeAt(o)===cr&&++o;else if(n!==r)continue;return t.slice(a,e)}return u=!0,t.slice(a,i)}for(t.charCodeAt(i-1)===cr&&--i,t.charCodeAt(i-1)===hr&&--i;(n=c())!==ur;){for(var h=[];n!==sr&&n!==ur;)h.push(n),n=c();e&&null==(h=e(h,s++))||a.push(h)}return a}function a(e,r){return e.map(function(e){return r.map(function(t){return o(e[t])}).join(t)})}function i(e){return e.map(o).join(t)}function o(t){return null==t?"":t instanceof Date?gr(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var r,a,i=n(t,function(t,n){if(r)return r(t,n-1);a=t,r=e?function(t,e){var r=fr(t);return function(n,a){return e(r(n),a,t)}}(t,e):fr(t)});return i.columns=a||[],i},parseRows:n,format:function(e,r){return null==r&&(r=pr(e)),[r.map(o).join(t)].concat(a(e,r)).join("\n")},formatBody:function(t,e){return null==e&&(e=pr(t)),a(t,e).join("\n")},formatRows:function(t){return t.map(i).join("\n")}}},mr=yr(","),vr=mr.parse,br=(mr.parseRows,mr.format,mr.formatBody,mr.formatRows,yr("\t")),_r=br.parse;br.parseRows,br.format,br.formatBody,br.formatRows;function wr(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}var xr=function(t,e){return fetch(t,e).then(wr)};function kr(t){return function(e,r,n){return 2===arguments.length&&"function"==typeof r&&(n=r,r=void 0),xr(e,r).then(function(e){return t(e,n)})}}kr(vr),kr(_r);function Sr(t){return function(e,r){return xr(e,r).then(function(e){return(new DOMParser).parseFromString(e,t)})}}Sr("application/xml"),Sr("text/html"),Sr("image/svg+xml"),Object.assign;let Er=null;addEventListener("message",t=>{const{data:{nodes:e,links:r,noOffscreen:n,update:o}}=t;!function(t){t.forEach(t=>{const e=t.colors.reduce((t,e)=>(t[e]=!0,t),{});t.featureVector=nr.map(({color:t})=>e[t]?1:0)});const e=new a.a({dim:2,perplexity:10,earlyExaggeration:10,learningRate:100,nIter:200,metric:"dice"});e.on("progressIter",([t,e,r])=>{postMessage({type:"tick",progress:t/200*.5})}),e.init({data:t.map(({featureVector:t})=>t),type:"dense"});const[r,n]=e.run();console.log(r,n);const i=rr().domain([-1,1]).range([or.left,ar-or.right]),o=rr().domain([-1,1]).range([or.top,ir-or.bottom]),s=e.getOutputScaled().map(([t,e])=>[i(t),o(e)]);t.forEach((t,e)=>{t.x=s[e][0],t.y=s[e][1]})}(e),function(t){for(let e=0,r=Math.ceil(Math.log(t.alphaMin())/Math.log(1-t.alphaDecay()));e<r;++e)postMessage({type:"tick",progress:e/r+.5}),t.tick()}(function(t,e){const r=w().distance(8).links(e).id(t=>t.sentenceIdx),n=v().radius(t=>8).iterations(2);return K(t).force("link",r).force("center",i(ar/2,ir/2)).force("collide",n).force("charge",Z().strength(-4e3)).stop()}(e,r)),postMessage({type:"end",nodes:e});const{minX:s,maxX:u,minY:l,maxY:c}=function(t){return t.reduce((t,{x:e,y:r})=>({minX:Math.min(t.minX,e),maxX:Math.max(t.maxX,e),minY:Math.min(t.minY,r),maxY:Math.max(t.maxY,r)}),{minX:1/0,maxX:-1/0,minY:1/0,maxY:-1/0})}(e),h=rr().domain([s,u]).range([or.left,ar-or.right]),f=rr().domain([l,c]).range([or.top,ir-or.bottom]);n||(o||((Er=t.data.canvas.getContext("2d")).globalAlpha=.3),setTimeout(()=>{Er.clearRect(0,0,ar,ir),r.forEach(t=>{Er.beginPath(),Er.moveTo(h(t.source.x),f(t.source.y)),Er.lineTo(h(t.target.x),f(t.target.y)),Er.stroke(),Er.strokeStyle=t.color,Er.closePath()})},750))})}]);